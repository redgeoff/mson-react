{"version":3,"sources":["icon.js","submenu.js","attach.js","menu.js","search-bar.js","icon-button.js","label-button.js","button.js","fields/button-field.js","form-control.js","fields/help-tool-tip.js","fields/form-label.js","fields/common-field.js","fields/display-value-typography.js","fields/boolean-field.js","card.js","fields/component-field.js","flex-break.js","utils.js","fields/field.js","fields/composite-field.js","fields/date-field.js","form.js","fields/form-field.js","fragment.js","grid-item.js","grid.js","form-card-buttons.js","form-card.js","form-dialog.js","confirmation-dialog.js","fields/select-order.js","fields/collection-field.js","fields/list-item-field.js","fields/list-field.js","fields/re-captcha-field.js","fields/autocomplete-select.js","fields/select-field.js","tabs.js","fields/time-field.js","text.js","fields/text-field.js","fields/url-field.js","components.js","component-utils.js","inner-component.js","component.js","snackbar.js","app.js","app-container.js","register-service-worker.js","render.js","demo/components/app.js","demo/components/contact-no-mson.js","demo/components/contacts.js","demo/components/fields.js","demo/components/index.js","demo/components/contacts-local-storage.js","demo/components/contacts-firebase.js","demo/components/edit-contact.js","demo/components/fields-screen.js","demo/components/form-builder.js","demo/components/generate-component.js","demo/components/grid.js","demo/components/home.js","demo/components/tasks.js","demo/components/tasks-local-storage.js","demo/components/tasks-firebase.js","demo/components/router.js","field-editor-form.js","form-editor.js","demo/app.js","demo/index.js"],"names":["Icon","handleClick","event","props","onClick","svgIconName","snakeCase","this","className","icon","role","iconContents","toFontIconName","aria-hidden","aria-label","React","PureComponent","Submenu","item","items","setState","open","state","onNavigate","onDrawerToggle","childSelected","path","each","classes","listItems","forEach","index","isSelected","classNames","secondary","push","selected","roles","registrar","client","user","hasRole","hidden","ListItem","button","nested","ListItemText","disableTypography","primary","Typography","variant","join","label","Collapse","in","timeout","unmountOnExit","List","disablePadding","withStyles","theme","paddingLeft","spacing","color","palette","text","fontWeight","attach","_watchProps","componentOrName","Component","wasMounted","getComponent","component","handleFieldChange","name","value","watchProps","indexOf","difference","Object","keys","hasComponent","get","prevProps","removeListener","addListener","setInitialState","on","initialState","Menu","handleDrawerToggle","handleNavigate","menuItem","submenus","mobileOpen","responsive","drawer","drawerHeader","Divider","temporaryDrawer","Drawer","anchor","direction","paper","drawerPaper","onClose","ModalProps","keepMounted","permanentDrawer","drawPaperResponsive","Hidden","mdUp","smDown","implementation","mixins","toolbar","paddingTop","width","breakpoints","up","position","height","withTheme","SearchBar","autoFullWidth","handleKeyUp","keyCode","onSearch","searchString","handleClearSearch","handleFocus","handleBlur","onChange","fullWidth","full","grow","InputProps","disableUnderline","input","textFieldInput","onKeyUp","target","textField","onFocus","onBlur","iconContainer","searchIcon","closeIcon","borderRadius","backgroundColor","fontSize","typography","subtitle1","padding","marginTop","common","white","top","left","right","flexGrow","IconButton","tooltip","useState","hovered","setHovered","onMouseEnter","Tooltip","title","useStyles","makeStyles","leftIcon","marginRight","Button","type","disabled","ButtonField","emitClick","FormControl","children","marginBottom","fullWidthClassName","noMarginBottomClassName","noMarginBottom","formControl","margin","HelpToolTip","help","disableTouchListener","FormLabel","shrink","childProps","assign","undefined","noShrink","caption","CommonField","fld","required","err","editable","touched","hideLabelUI","hideLabel","useDisplayValue","shrinkLabel","inlineLabel","autoHideLabel","lbl","isBlank","id","getUniqueId","labelText","htmlFor","error","InputLabel","firstErr","getFirstErr","FormHelperText","DisplayValueTypography","root","display","BooleanField","handleChange","setValue","checked","FormControlLabel","control","Switch","getDisplayValue","Card","content","container","justify","xs","sm","md","lg","Paper","wrap","flex","ComponentField","marginLeft","FlexBreak","break","definedProps","Field","block","accessEditable","didCreate","noBlock","getClassName","componentUtils","getUIComponent","Fragment","utils","getIfDefined","CompositeField","fields","lastIsBlock","first","eachField","field","last","DateField","handleDateChange","date","setTouched","includeTime","minDate","maxDate","format","dis","DateTimePicker","DatePicker","DateFnsUtils","clearable","Form","fieldsCanAccess","handleSave","preventDefault","validate","getErrs","length","submit","turnOnAutoValidate","access","calcFieldsCanAccess","set","autoValidate","mode","getFields","ignoreErrs","prevState","adjustAccess","formTag","isLoading","key","getKey","flds","map","onSubmit","FormField","form","flexFlow","GridItem","xl","Grid","FormCardButtons","forbidUpdate","forbidDelete","archivedAt","onEdit","onDelete","updateButton","deleteButton","FormCard","handleEdit","handleDelete","cardButtons","buttons","cursor","FormDialog","saveClicked","previousMode","handleClose","withCancelButton","onCancel","currentForm","disableSubmit","onSave","CollectionFieldCore","MODES","DELETE","RESTORE","fullScreen","disableSave","hasErrorForTouchedField","isOpen","Dialog","aria-labelledby","DialogContent","DialogActions","withMobileDialog","ConfirmationDialog","yes","alert","aria-describedby","DialogTitle","DialogContentText","autoFocus","SelectOrder","sortOrder","sortBy","flipped","options","option","MenuItem","Select","flip","transform","getItemStyle","isDragging","draggableStyle","userSelect","background","getListStyle","isDraggingOver","grey","CollectionField","handleCancel","preventReadAction","READ","UPDATE","handleNew","CREATE","a","save","formToDelete","getValue","handleConfirmationClose","archive","handleOrdering","order","onDragEnd","result","destination","source","moveAndSaveForm","sourceIndex","destinationIndex","canCreate","canUpdate","canArchive","bufferTopId","_infiniteLoader","resizeSpacer","spacerHeight","setSpacerResizing","change","forbidOrder","showArchived","maxGrids","maxColumns","cards","getForms","setEditable","getUniqueItemId","_getFormKey","formExtras","getFormExtras","canDrag","draggableId","provided","snapshot","ref","innerRef","draggableProps","dragHandleProps","style","isDefaultField","numCards","forbidCreate","forbidSort","store","singularLabel","getSingularLabel","reachedMax","showNewButton","canOrder","sortOptions","showOrder","align","noResults","preventUpdate","preventDeleteAction","confirmationOpen","confirmationTitle","toLowerCase","spacerStyle","spacerId","cardContainer","droppableId","placeholder","showNoRecords","header","spacer","footer","animation","ListItemField","emit","allowDelete","ListField","createField","autoCreateFields","canDeleteEmpty","hideDeleteButton","fieldIsBlank","ReCAPTCHAField","isEditable","siteKey","globals","captcha","sitekey","inputComponent","inputRef","components","Control","optionalProps","selectProps","inputProps","ariaLabel","innerProps","textFieldProps","square","MultiValue","Chip","tabIndex","chip","chipFocused","isFocused","isDisabled","removeProps","deleteIcon","NoOptionsMessage","noOptionsMessage","Option","buttonRef","SingleValue","singleValue","ValueContainer","valueContainer","AutoCompleteSelect","isClearable","onInputChange","isMulti","selectStyles","dropdownIndicator","base","clearIndicator","menuPortal","zIndex","styles","menuPortalTarget","document","body","minWidth","flexWrap","alignItems","emphasize","SelectField","focus","multiple","val","blankString","opts","Checkbox","autocomplete","fieldValue","renderValue","Input","chips","getOptionLabel","autocompleteValue","isValueBlank","handleAutocompleteChange","renderOptions","displayValue","Tabs","itemName","emitChange","AppBar","elevation","indicatorColor","textColor","scrollButtons","Tab","TimeField","showSeconds","TimePicker","seconds","invalidDateMessage","Text","TextField","fromUIValue","TextMaskCustom","other","mask","inputElement","maxLength","multiline","rows","rowsMax","optional","uiValue","getUIValue","URLField","newWindow","href","ChainedSelectField","ChainedSelectListField","IdField","IntegerField","MoneyField","NumberField","PhoneField","SelectListField","TextListField","User","compiler","isCompiled","Parent","getPrototypeOf","constructor","ancestorName","getOldestCompiledAncestor","Ancestor","InnerComponent","handlerName","charAt","toUpperCase","slice","addChangeListener","removeChangeListener","others","definition","newComponent","createComponent","destroy","comp","Snackbar","reason","message","anchorOrigin","vertical","horizontal","autoHideDuration","ContentProps","action","close","App","snackbarOpen","snackbarMessage","nextMenuItem","showArchivedToggle","searchStringInput","showSearch","showSearchOnMobile","callback","producedContent","has","displayConfirmation","history","confirmation","switchContent","parameters","currentComponent","emitUnload","location","menu","route","toRoute","queryString","search","substr","hash","parentItem","getParent","requireAccess","Action","run","ComponentMSON","emitLoad","canSearch","onLocation","pathname","pathHash","pathSearch","handleSnackbarClose","handleArchivedChange","window","scrollTo","handleSearchStringInputChange","handleSearch","toggleShowSearch","setGlobalOnNavigate","setOnNavigate","redirectPath","getItemAndParsePath","params","redirectAfterLogin","emitLoggedOut","canAccess","displaySnackbar","redirect","navigateTo","unlisten","listen","awaitSession","addEventListener","e","showArchivedChecked","archivedToggle","searchBox","alignRight","isResponsive","navIconHide","noWrap","onMobile","isWidthDown","bar","menuButton","appBar","appBarResponsive","Toolbar","menuAlwaysTemporary","menuSidebar","fullScreenStyle","appFrame","contentResponsive","overflow","default","overflowAnchor","withWidth","withRouter","createMuiTheme","blueGrey","lightBlue","useNextVariants","AppContainer","basename","CssBaseline","getUserConfirmation","isLocalhost","Boolean","hostname","match","register","navigator","URL","process","origin","swUrl","fetch","then","response","status","headers","serviceWorker","ready","registration","unregister","reload","registerValidSW","catch","console","log","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","controller","render","app","ReactDOM","getElementById","registerServiceWorker","actions","ContactNoMSON","EmailField","setValues","firstName","lastName","email","values","getValues","reset","registerComponent","chainedSelectOptions","parentValue","Contacts","schema","formFactory","product","ContactsLocalStorage","storeName","ContactsFirebase","apiKey","authDomain","projectId","collection","EditContact","baseForm","listeners","storeWhere","FieldsScreen","addressLine1","addressLine2","city","stateProvince","postalCode","country","github","medium","twitter","if","$ne","else","Fields","elevate","fieldFactory","FormBuilder","GenerateComponent","JSON","stringify","Home","Tasks","TasksLocalStorage","TasksFirebase","Router","personId","messageId","FieldEditorForm","handleValueChange","componentName","clearErr","isField","preview","card","CardContent","gutterBottom","overflowY","maxHeight","FormEditor","reCAPTCHASiteKey","uiComponents","FieldEditorFormUI","FormEditorUI"],"mappings":"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","file":"static/js/main.ecf91716.chunk.js","sourcesContent":["import React from 'react';\nimport IconMui from '@material-ui/core/Icon';\nimport snakeCase from 'lodash/snakeCase';\n\n// Note: we use font icons instead of SVG icons as this allows us to support any icon dynamically\n// without adding all icons to the JS bundle. The MaterialUI icons are about 54KB which is\n// substantially smaller than their SVG counterparts.\n//\n// import * as Icons from '@material-ui/icons';\n\nexport default class Icon extends React.PureComponent {\n  handleClick = (event) => {\n    if (this.props.onClick) {\n      this.props.onClick(event);\n    }\n  };\n\n  // Convert to the font icon name so that we can use the SVG Icon names. This allows us to make\n  // changes to this logic without changing the calling code.\n  toFontIconName(svgIconName) {\n    return snakeCase(svgIconName);\n  }\n\n  render() {\n    const { className, icon, role } = this.props;\n\n    const iconContents = icon ? this.toFontIconName(icon) : null;\n\n    return (\n      <IconMui\n        className={className}\n        onClick={this.handleClick}\n        aria-hidden={this.props['aria-hidden']}\n        aria-label={this.props['aria-label']}\n        role={role}\n      >\n        {iconContents}\n      </IconMui>\n    );\n  }\n}\n","import React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Collapse from '@material-ui/core/Collapse';\nimport Typography from '@material-ui/core/Typography';\nimport Icon from './icon';\nimport each from 'lodash/each';\nimport registrar from 'mson/lib/compiler/registrar';\n\nconst styles = (theme) => ({\n  nested: {\n    paddingLeft: theme.spacing(4),\n  },\n  primary: {\n    color: theme.palette.text.primary,\n  },\n  secondary: {\n    color: theme.palette.text.secondary,\n  },\n  selected: {\n    fontWeight: 'bold',\n  },\n});\n\nclass Submenu extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      open: this.childSelected(),\n    };\n  }\n\n  childSelected() {\n    const { item, path } = this.props;\n\n    let childSelected = false;\n\n    each(item.items, (item) => {\n      if (path === item.path) {\n        childSelected = true;\n        return false; // exit loop\n      }\n    });\n\n    return childSelected;\n  }\n\n  handleClick = (item) => {\n    // Has sub items?\n    if (item.items) {\n      this.setState({ open: !this.state.open });\n    } else {\n      // Note: the navigation is handled by the parent as we want to be able to prevent the\n      // navigation if say a form is dirty, etc...\n      if (this.props.onNavigate) {\n        this.props.onNavigate(item);\n      }\n\n      if (this.props.onDrawerToggle) {\n        // Close the drawer\n        this.props.onDrawerToggle();\n      }\n    }\n  };\n\n  items() {\n    const { classes, item, path } = this.props;\n    const listItems = [];\n    item.items.forEach((item, index) => {\n      const isSelected = path === item.path;\n      let classNames = [classes.secondary];\n      if (isSelected) {\n        classNames.push(classes.selected);\n      }\n\n      if (\n        (!item.roles ||\n          (registrar.client && registrar.client.user.hasRole(item.roles))) &&\n        item.hidden !== true\n      ) {\n        listItems.push(\n          <ListItem\n            button\n            className={classes.nested}\n            key={index}\n            onClick={() => this.handleClick(item)}\n          >\n            <ListItemText\n              disableTypography\n              primary={\n                <Typography variant=\"body2\" className={classNames.join(' ')}>\n                  {item.label}\n                </Typography>\n              }\n            />\n          </ListItem>\n        );\n      }\n    });\n    return listItems;\n  }\n\n  render() {\n    const { item, classes, path } = this.props;\n    const items = item.items ? this.items() : null;\n\n    const isSelected = path === item.path;\n    let classNames = [classes.primary];\n    if (isSelected) {\n      classNames.push(classes.selected);\n    }\n\n    let listItems = null;\n    if (items) {\n      listItems = (\n        <Collapse in={this.state.open} timeout=\"auto\" unmountOnExit>\n          <List disablePadding>{this.items()}</List>\n        </Collapse>\n      );\n    }\n\n    return (\n      <div>\n        <ListItem button onClick={() => this.handleClick(item)}>\n          <ListItemText\n            disableTypography\n            primary={\n              <Typography variant=\"subtitle1\" className={classNames.join(' ')}>\n                {item.label}\n              </Typography>\n            }\n          />\n          {items ? (\n            this.state.open ? (\n              <Icon icon=\"ExpandLess\" />\n            ) : (\n              <Icon icon=\"ExpandMore\" />\n            )\n          ) : null}\n        </ListItem>\n        {listItems}\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles)(Submenu);\n","import React from 'react';\nimport difference from 'lodash/difference';\n\n// Usage: attach(['prop1', 'prop2', ...], componentOrName)(Component)\n\nconst attach = (_watchProps, componentOrName) => {\n  return (Component) => {\n    return class extends React.PureComponent {\n      wasMounted = false;\n\n      getComponent = (props) => {\n        if (!props) {\n          props = this.props;\n        }\n\n        if (!componentOrName) {\n          return props.component;\n        } else if (typeof componentOrName === 'string') {\n          return props[componentOrName];\n        } else {\n          // componentOrName is a component\n          return componentOrName;\n        }\n      };\n\n      // The component can be created at any time, e.g. when the definition is set. Therefore, we\n      // need to handle a missing component until the component is present.\n      hasComponent() {\n        return !!this.getComponent();\n      }\n\n      constructor(props) {\n        super(props);\n\n        // The field props that we want to expose in the state. Remove any names that are in\n        // this.props so that we can override those values.\n        this.watchProps = difference(_watchProps, Object.keys(this.props));\n\n        // These values need to be in the state so that the component is rerendered when they change.\n        if (this.hasComponent()) {\n          this.state = this.getComponent().get(this.watchProps);\n        }\n      }\n\n      handleFieldChange = (name, value) => {\n        if (this.watchProps.indexOf(name) !== -1) {\n          // Is the component mounted? Prevent a race condition where the handler tries to set the\n          // state after the component has been unmounted.\n          if (this.wasMounted) {\n            this.setState({ [name]: value });\n          }\n        }\n      };\n\n      componentDidUpdate(prevProps) {\n        if (this.getComponent() !== this.getComponent(prevProps)) {\n          // The component is changing so recreate the listener\n          this.removeListener();\n          this.addListener();\n\n          // Set the initial state as the component has changed\n          this.setInitialState();\n        }\n      }\n\n      addListener() {\n        if (this.hasComponent()) {\n          this.getComponent().on('$change', this.handleFieldChange);\n        }\n      }\n\n      removeListener() {\n        if (this.hasComponent()) {\n          this.getComponent().removeListener('$change', this.handleFieldChange);\n        }\n      }\n\n      setInitialState() {\n        if (this.hasComponent()) {\n          const initialState = this.getComponent().get(this.watchProps);\n          this.setState(initialState);\n        }\n      }\n\n      componentDidMount() {\n        // Note: we have to use componentDidMount and not componentWillMount as handleFieldChange\n        // can change the state and we aren't allowed to change the state until the component has\n        // mounted.\n\n        this.wasMounted = true;\n\n        this.addListener();\n\n        // Update state with any changes that have occured since construction, but before mounting\n        this.setInitialState();\n      }\n\n      componentWillUnmount() {\n        this.removeListener();\n        this.wasMounted = false;\n      }\n\n      render() {\n        return <Component {...this.state} {...this.props} />;\n      }\n    };\n  };\n};\n\nexport default attach;\n","// TODO: when click on another section, close other sections? Requires moving menu state to app?\n\nimport React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport Drawer from '@material-ui/core/Drawer';\nimport Hidden from '@material-ui/core/Hidden';\nimport Divider from '@material-ui/core/Divider';\nimport Submenu from './submenu';\nimport attach from './attach';\nimport Typography from '@material-ui/core/Typography';\nimport registrar from 'mson/lib/compiler/registrar';\n\nconst drawerWidth = 240;\n\nconst styles = (theme) => ({\n  drawerHeader: {\n    ...theme.mixins.toolbar,\n    paddingLeft: theme.spacing(3),\n    paddingTop: theme.spacing(1),\n  },\n  drawerPaper: {\n    width: 250,\n  },\n  drawPaperResponsive: {\n    [theme.breakpoints.up('md')]: {\n      width: drawerWidth,\n      // position: 'relative',\n      // height: '100%',\n\n      // Extend to bottom of screen. TODO: does this work on mobile?\n      // https://stackoverflow.com/a/48506883/2831606\n      position: 'fixed',\n      height: '100vh',\n    },\n  },\n});\n\nclass Menu extends React.PureComponent {\n  handleDrawerToggle = () => {\n    if (this.props.onDrawerToggle) {\n      this.props.onDrawerToggle();\n    }\n  };\n\n  handleNavigate = (menuItem) => {\n    if (this.props.onNavigate) {\n      this.props.onNavigate(menuItem);\n    }\n  };\n\n  items() {\n    const { component, path } = this.props;\n    const items = component.get('items');\n    const submenus = [];\n    items.forEach((item, index) => {\n      // Has access to item?\n      if (\n        (!item.roles ||\n          (registrar.client && registrar.client.user.hasRole(item.roles))) &&\n        item.hidden !== true\n      ) {\n        submenus.push(\n          <Submenu\n            item={item}\n            key={index}\n            onNavigate={this.handleNavigate}\n            path={path}\n            onDrawerToggle={this.handleDrawerToggle}\n          />\n        );\n      }\n    });\n    return submenus;\n  }\n\n  render() {\n    const { classes, theme, mobileOpen, responsive /*, roles*/ } = this.props;\n\n    let items = null;\n    // if (!roles || (registrar.client && registrar.client.user.hasRole(roles))) {\n    items = this.items();\n    // }\n\n    const drawer = (\n      <div>\n        <div className={classes.drawerHeader}>\n          <Typography variant=\"h4\">Logo</Typography>\n        </div>\n        <Divider />\n        {items}\n      </div>\n    );\n\n    const temporaryDrawer = (\n      <Drawer\n        variant=\"temporary\"\n        anchor={theme.direction === 'rtl' ? 'right' : 'left'}\n        open={mobileOpen}\n        classes={{\n          paper: classes.drawerPaper,\n        }}\n        onClose={this.handleDrawerToggle}\n        ModalProps={{\n          keepMounted: true, // Better open performance on mobile.\n        }}\n      >\n        {drawer}\n      </Drawer>\n    );\n\n    const permanentDrawer = (\n      <Drawer\n        variant=\"permanent\"\n        open\n        classes={{\n          paper:\n            classes.drawerPaper +\n            (responsive ? ` ${classes.drawPaperResponsive}` : ''),\n        }}\n      >\n        {drawer}\n      </Drawer>\n    );\n\n    if (responsive) {\n      return (\n        <div>\n          <Hidden mdUp>{temporaryDrawer}</Hidden>\n          <Hidden smDown implementation=\"css\">\n            {permanentDrawer}\n          </Hidden>\n        </div>\n      );\n    } else {\n      return temporaryDrawer;\n    }\n  }\n}\n\nMenu = withStyles(styles, { withTheme: true })(Menu);\nMenu = attach(['items' /*, 'roles'*/])(Menu);\nexport default Menu;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport TextField from '@material-ui/core/TextField';\nimport IconButton from '@material-ui/core/IconButton';\nimport Icon from './icon';\nimport classNames from 'classnames';\n\n// TODO: see https://material-ui-next.com/style/icons/#icons and implement:\n// 1. Mouseover to change background color\n\nconst styles = (theme) => ({\n  textField: {\n    width: '100%',\n  },\n\n  textFieldInput: {\n    borderRadius: 3,\n    backgroundColor: theme.palette.primary[400],\n    fontSize: theme.typography.subtitle1.fontSize,\n    padding: '10px 34px 10px 34px',\n    marginTop: '2px',\n    width: 'calc(100%)',\n    color: theme.palette.common.white,\n  },\n\n  // Needed so that relative components don't take up any space\n  iconContainer: {\n    position: 'relative',\n    width: '100%', // Set 100% so that we can position the close icon relative to this\n    height: '0px',\n  },\n\n  searchIcon: {\n    position: 'absolute',\n    top: '-31px',\n    left: '6px',\n  },\n\n  closeIcon: {\n    position: 'absolute',\n    top: '-43px',\n    right: '-5px',\n  },\n\n  grow: {\n    flexGrow: 1,\n  },\n});\n\nclass SearchBar extends React.PureComponent {\n  state = { autoFullWidth: false };\n\n  handleKeyUp = (event) => {\n    // Enter pressed?\n    if (event.keyCode === 13) {\n      this.props.onSearch(this.props.searchString);\n    }\n  };\n\n  handleClearSearch = (event) => {\n    this.props.onSearch('');\n  };\n\n  handleFocus = () => {\n    this.setState({ autoFullWidth: true });\n  };\n\n  handleBlur = () => {\n    this.setState({ autoFullWidth: false });\n  };\n\n  render() {\n    const {\n      classes,\n      className,\n      searchString,\n      onChange,\n      fullWidth,\n    } = this.props;\n\n    const { autoFullWidth } = this.state;\n\n    const full = fullWidth || autoFullWidth;\n\n    return (\n      <div className={classNames(className, full ? classes.grow : null)}>\n        <TextField\n          InputProps={{\n            disableUnderline: true,\n            classes: {\n              input: classes.textFieldInput,\n            },\n          }}\n          value={searchString}\n          onKeyUp={this.handleKeyUp}\n          onChange={(event) => onChange(event.target.value)}\n          className={classes.textField}\n          onFocus={this.handleFocus}\n          onBlur={this.handleBlur}\n        />\n        <div className={classes.iconContainer}>\n          <Icon icon=\"Search\" className={classes.searchIcon} />\n          <IconButton\n            color=\"inherit\"\n            aria-label=\"clear search\"\n            onClick={this.handleClearSearch}\n            className={classes.closeIcon}\n          >\n            <Icon icon=\"Close\" />\n          </IconButton>\n        </div>\n      </div>\n    );\n  }\n}\n\nSearchBar.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nSearchBar = withStyles(styles)(SearchBar);\n\nexport default SearchBar;\n","import React, { useState } from 'react';\nimport IconButtonMui from '@material-ui/core/IconButton';\nimport Icon from './icon';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nconst IconButton = (props) => {\n  const { onClick, icon, tooltip } = props;\n\n  const [hovered, setHovered] = useState(false);\n\n  // NOTE: using Tooltips when we have 100 more items leads to a significant latency. We sidestep\n  // this by only loading the tooltip on the initial mouse over.\n\n  const button = (\n    <IconButtonMui\n      onClick={onClick}\n      onMouseEnter={() => setHovered(true)}\n      aria-label={props['aria-label']}\n    >\n      <Icon icon={icon} />\n    </IconButtonMui>\n  );\n\n  if (hovered && tooltip) {\n    return <Tooltip title={tooltip}>{button}</Tooltip>;\n  } else {\n    return button;\n  }\n};\n\nexport default IconButton;\n","import React from 'react';\nimport ButtonMui from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Icon from './icon';\n\nconst useStyles = makeStyles((theme) => ({\n  leftIcon: {\n    marginRight: theme.spacing(1),\n  },\n  marginTop: {\n    marginTop: theme.spacing(3),\n  },\n}));\n\nconst handleClick = (onClick) => {\n  if (onClick) {\n    onClick();\n  }\n};\n\nconst Button = (props) => {\n  const classes = useStyles();\n\n  const {\n    type,\n    disabled,\n    label,\n    icon,\n    fullWidth,\n    variant,\n    marginTop,\n    onClick,\n  } = props;\n\n  const className = marginTop !== false ? classes.marginTop : null;\n\n  return (\n    <ButtonMui\n      className={className}\n      type={type}\n      color=\"primary\"\n      disabled={disabled}\n      onClick={() => handleClick(onClick)}\n      fullWidth={fullWidth}\n      variant={variant}\n    >\n      {icon ? <Icon className={classes.leftIcon} icon={icon} /> : null}\n      {label}\n    </ButtonMui>\n  );\n};\n\nexport default Button;\n","import React from 'react';\nimport IconButton from './icon-button';\nimport LabelButton from './label-button';\n\nconst Button = (props) => {\n  const {\n    type,\n    disabled,\n    label,\n    icon,\n    fullWidth,\n    variant,\n    marginTop,\n    onClick,\n    tooltip,\n  } = props;\n\n  if (label || !icon) {\n    return (\n      <LabelButton\n        type={type}\n        disabled={disabled}\n        label={label}\n        icon={icon}\n        fullWidth={fullWidth}\n        variant={variant}\n        marginTop={marginTop}\n        onClick={onClick}\n      />\n    );\n  } else {\n    return <IconButton onClick={onClick} icon={icon} tooltip={tooltip} />;\n  }\n};\n\nexport default Button;\n","import React from 'react';\nimport attach from '../attach';\nimport Button from '../button';\n\nclass ButtonField extends React.PureComponent {\n  handleClick = () => {\n    const { type } = this.props;\n\n    // Is the button not a submit button? Let the form handle submit buttons so that the form\n    // performs the validation\n    if (type !== 'submit') {\n      this.props.component.emitClick();\n    }\n  };\n\n  render() {\n    const {\n      label,\n      type,\n      disabled,\n      icon,\n      fullWidth,\n      variant,\n      tooltip,\n    } = this.props;\n    return (\n      <Button\n        type={type}\n        label={label}\n        disabled={disabled}\n        onClick={this.handleClick}\n        icon={icon}\n        fullWidth={fullWidth}\n        variant={variant}\n        tooltip={tooltip}\n      />\n    );\n  }\n}\n\nexport default attach([\n  'label',\n  'type',\n  'disabled',\n  'icon',\n  'fullWidth',\n  'variant',\n  'tooltip',\n])(ButtonField);\n","import React from 'react';\nimport FormControlMU from '@material-ui/core/FormControl';\nimport withStyles from '@material-ui/core/styles/withStyles';\n\nconst styles = (theme) => ({\n  formControl: {\n    margin: theme.spacing(1),\n  },\n  fullWidth: {\n    // TODO: bug in material ui?\n    width: `calc(100% - ${theme.spacing(2)}px)`,\n  },\n  noMarginBottom: {\n    marginBottom: 0,\n  },\n});\n\nclass FormControl extends React.PureComponent {\n  render() {\n    const { fullWidth, children, classes, marginBottom } = this.props;\n\n    const fullWidthClassName = fullWidth ? classes.fullWidth : '';\n    const noMarginBottomClassName =\n      marginBottom === false ? classes.noMarginBottom : '';\n\n    return (\n      <FormControlMU\n        fullWidth={fullWidth}\n        className={`${classes.formControl} ${fullWidthClassName} ${noMarginBottomClassName}`}\n      >\n        {children}\n      </FormControlMU>\n    );\n  }\n}\n\nexport default withStyles(styles)(FormControl);\n","// TODO: make full width of field include right margin if there is help?\n\nimport React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Icon from '../icon';\n\nexport default class HelpToolTip extends React.PureComponent {\n  render() {\n    const { help } = this.props;\n\n    // Note: we use disableTouchListener as otherwise the user needs to press and hold before the\n    // tooltip appears, something that is not intuitive. With this configuration, the user can just\n    // click the button to view the tooltip.\n    return (\n      <Tooltip disableTouchListener title={help}>\n        <IconButton aria-label=\"Help\">\n          <Icon icon=\"HelpOutline\" />\n        </IconButton>\n      </Tooltip>\n    );\n  }\n}\n","import React from 'react';\nimport FormLabelMui from '@material-ui/core/FormLabel';\nimport withStyles from '@material-ui/core/styles/withStyles';\n\nconst styles = (theme) => ({\n  shrink: {\n    ...Object.assign({}, theme.typography.caption, { color: undefined }),\n  },\n  noShrink: {\n    ...Object.assign({}, theme.typography.subtitle1, { color: undefined }),\n  },\n});\n\nclass FormLabel extends React.PureComponent {\n  render() {\n    const { children, classes, shrink } = this.props;\n\n    const childProps = Object.assign({}, this.props, {\n      shrink: undefined,\n      classes: undefined,\n    });\n\n    const className = shrink ? classes.shrink : classes.noShrink;\n\n    return (\n      <FormLabelMui {...childProps} className={className}>\n        {children}\n      </FormLabelMui>\n    );\n  }\n}\n\nexport default withStyles(styles)(FormLabel);\n","import React from 'react';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '../form-control';\nimport attach from '../attach';\nimport HelpToolTip from './help-tool-tip';\nimport FormLabel from './form-label';\n\nclass CommonField extends React.PureComponent {\n  render() {\n    const {\n      component,\n      children,\n      label,\n      required,\n      fullWidth,\n      err,\n      editable,\n      touched,\n      help,\n      hideLabelUI,\n      hideLabel,\n      useDisplayValue,\n      shrinkLabel,\n      inlineLabel,\n      marginBottom,\n      autoHideLabel,\n    } = this.props;\n\n    let fld = null;\n\n    let lbl = null;\n\n    const isBlank = component.isBlank();\n\n    const id = component.getUniqueId();\n\n    if (!hideLabelUI && !hideLabel && (!autoHideLabel || label)) {\n      if (editable && !useDisplayValue && !inlineLabel) {\n        lbl = (\n          <InputLabel\n            htmlFor={id}\n            error={touched && err ? true : false}\n            // If label is blank then don't show as required\n            required={label && required}\n            shrink={shrinkLabel}\n          >\n            {label}\n          </InputLabel>\n        );\n      } else {\n        // We display a non-breaking space when the label is empty so that CompositeFields, like the\n        // ChainedSelectField, print all their display values on the same line.\n        const labelText = label ? label : '\\u00A0';\n\n        lbl = (\n          <FormLabel\n            id={`label-${id}`}\n            htmlFor={id}\n            error={touched && err ? true : false}\n            required={required && !useDisplayValue && editable}\n            shrink={useDisplayValue || !editable || shrinkLabel}\n          >\n            {labelText}\n          </FormLabel>\n        );\n\n        if (!inlineLabel) {\n          // We wrap the label in a div tag so that the proceeding display value appears on a\n          // different line\n          lbl = <div>{lbl}</div>;\n        }\n      }\n    }\n\n    const firstErr = component.getFirstErr();\n\n    fld = (\n      <span>\n        {lbl}\n        {children}\n        {help && editable ? <HelpToolTip help={help} /> : ''}\n        {touched && err ? (\n          <FormHelperText error>{firstErr}</FormHelperText>\n        ) : null}\n      </span>\n    );\n\n    if (editable || !isBlank) {\n      return (\n        <FormControl fullWidth={fullWidth} marginBottom={marginBottom}>\n          {fld}\n        </FormControl>\n      );\n    } else {\n      return null;\n    }\n  }\n}\n\n// 'value' is needed in the event we are showing the display value\nCommonField = attach([\n  'label',\n  'required',\n  'fullWidth',\n  'value',\n  'err',\n  'editable',\n  'touched',\n  'help',\n  'hideLabel',\n  'useDisplayValue',\n  'autoHideLabel',\n])(CommonField);\n\nexport default CommonField;\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport withStyles from '@material-ui/core/styles/withStyles';\n\nconst styles = (theme) => ({\n  root: {\n    display: 'inline-block',\n  },\n});\n\nclass DisplayValueTypography extends React.PureComponent {\n  render() {\n    const { children, classes, id } = this.props;\n\n    // We use a span tag so that the element is inline\n    return (\n      <Typography\n        variant=\"subtitle1\"\n        component=\"span\"\n        className={classes.root}\n        id={id}\n        aria-label={this.props['aria-label']}\n      >\n        {children}\n      </Typography>\n    );\n  }\n}\n\nexport default withStyles(styles)(DisplayValueTypography);\n","import React from 'react';\nimport Switch from '@material-ui/core/Switch';\nimport CommonField from './common-field';\nimport attach from '../attach';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport DisplayValueTypography from './display-value-typography';\n\nclass BooleanField extends React.PureComponent {\n  handleChange = (event) => {\n    this.props.component.setValue(event.target.checked);\n  };\n\n  render() {\n    const {\n      value,\n      disabled,\n      component,\n      editable,\n      useDisplayValue,\n      label,\n    } = this.props;\n\n    let hideLabelUI = null;\n\n    let fld = null;\n    if (editable && !useDisplayValue) {\n      hideLabelUI = true;\n      fld = (\n        <FormControlLabel\n          control={\n            <Switch\n              checked={value ? value : false}\n              onChange={this.handleChange}\n              value=\"true\"\n              disabled={disabled}\n            />\n          }\n          label={label}\n        />\n      );\n    } else {\n      fld = (\n        <DisplayValueTypography>\n          {component.getDisplayValue()}\n        </DisplayValueTypography>\n      );\n    }\n\n    return (\n      <CommonField component={component} hideLabelUI={hideLabelUI}>\n        {fld}\n      </CommonField>\n    );\n  }\n}\n\nexport default attach([\n  'value',\n  'err',\n  'disabled',\n  'editable',\n  'useDisplayValue',\n  'label',\n])(BooleanField);\n","import React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport Component from './component';\nimport Typography from '@material-ui/core/Typography';\n\nconst styles = (theme) => ({\n  paper: {\n    margin: theme.spacing(1),\n    padding: theme.spacing(2),\n  },\n  content: {\n    flex: 1, // TODO: needed?\n  },\n});\n\nclass Card extends React.PureComponent {\n  render() {\n    const { classes, component } = this.props;\n\n    const content = component.get('content');\n    const title = component.get('title');\n\n    return (\n      <Grid container spacing={0} justify=\"center\">\n        <Grid item xs={12} sm={9} md={6} lg={6}>\n          <Paper className={classes.paper}>\n            <Grid container wrap=\"nowrap\">\n              <Grid item className={classes.content}>\n                <Typography variant=\"h5\" component=\"h2\">\n                  {title}\n                </Typography>\n                <Component component={content} />\n              </Grid>\n            </Grid>\n          </Paper>\n        </Grid>\n      </Grid>\n    );\n  }\n}\n\nexport default withStyles(styles)(Card);\n","import React from 'react';\nimport attach from '../attach';\nimport Component from '../component';\nimport withStyles from '@material-ui/core/styles/withStyles';\n\nconst styles = (theme) => ({\n  root: {\n    marginLeft: theme.spacing(1),\n  },\n});\n\nclass ComponentField extends React.PureComponent {\n  render() {\n    const { content, classes } = this.props;\n\n    return (\n      <div className={classes.root}>\n        <Component component={content} />\n      </div>\n    );\n  }\n}\n\nComponentField = withStyles(styles)(ComponentField);\nComponentField = attach(['content'])(ComponentField);\nexport default ComponentField;\n","import React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\n\nconst styles = (theme) => ({\n  // break: {\n  //   flexBasis: '100%',\n  //   width: '0px',\n  //   height: '0px',\n  //   overflow: 'hidden'\n  // }\n  break: {\n    width: '100%',\n  },\n});\n\nclass FlexBreak extends React.PureComponent {\n  render() {\n    const { classes } = this.props;\n    return <div className={classes.break} />;\n  }\n}\n\nexport default withStyles(styles)(FlexBreak);\n","import each from 'lodash/each';\nclass Utils {\n  getIfDefined(props) {\n    const definedProps = {};\n    each(props, (value, name) => {\n      if (value !== undefined) {\n        definedProps[name] = value;\n      }\n    });\n    return definedProps;\n  }\n}\nexport default new Utils();\n","import React from 'react';\nimport componentUtils from '../component-utils';\nimport attach from '../attach';\nimport FlexBreak from '../flex-break';\nimport utils from '../utils';\n\n// Use MSON React Component instead?\nclass Field extends React.PureComponent {\n  render() {\n    const {\n      component,\n      hidden,\n      block,\n      accessEditable,\n      didCreate,\n      noBlock,\n      disabled,\n    } = this.props;\n\n    // Don't show the component until didCreate is true as we may need to wait for fields to be\n    // hidden or otherwise modified by listeners\n    if (hidden || !didCreate) {\n      return null;\n    } else if (component.getClassName() === 'Field') {\n      // Prevent an infinite loop caused by trying to render component=Field\n      return null;\n    } else {\n      // Get corresponding UI component\n      const Field = componentUtils.getUIComponent(component);\n\n      // Note: we use React.Fragment over a span as spans can cause issues with the flexbox layout\n      // when displaying a nested form\n      return (\n        <React.Fragment>\n          <Field\n            component={component}\n            accessEditable={accessEditable}\n            block={block}\n            {...utils.getIfDefined({ disabled })}\n          />\n          {!noBlock && block ? <FlexBreak /> : null}\n        </React.Fragment>\n      );\n    }\n  }\n}\n\nexport default attach(['hidden', 'block', 'didCreate'])(Field);\n","import React from 'react';\nimport Field from './field';\nimport attach from '../attach';\nimport HelpToolTip from './help-tool-tip';\nimport FlexBreak from '../flex-break';\n\nclass CompositeField extends React.PureComponent {\n  render() {\n    const {\n      component,\n      help,\n      editable,\n      useDisplayValue,\n      block,\n      disabled,\n    } = this.props;\n\n    let fields = [];\n\n    let lastIsBlock = false;\n\n    let first = true;\n\n    component.eachField((field, index, last) => {\n      // Don't show the field if we are using the display value and it is blank, e.g. it is the\n      // empty \"next\" field.\n      if (first || !useDisplayValue || !field.isBlank()) {\n        if (last && field.get('block')) {\n          lastIsBlock = true;\n        }\n        fields.push(\n          <Field\n            component={field}\n            key={index}\n            noBlock={last}\n            disabled={disabled}\n          />\n        );\n      }\n\n      if (first) {\n        first = false;\n      }\n    });\n\n    if (help && editable) {\n      fields.push(<HelpToolTip help={help} key=\"help\" />);\n    }\n\n    if (lastIsBlock && block !== false) {\n      // Break after any help\n      fields.push(<FlexBreak key=\"break\" />);\n    }\n\n    return fields;\n  }\n}\n\n// We want the component to update when we receive new fields\nexport default attach(['change', 'help', 'editable', 'useDisplayValue'])(\n  CompositeField\n);\n","import React from 'react';\nimport attach from '../attach';\nimport CommonField from './common-field';\nimport {\n  MuiPickersUtilsProvider,\n  DateTimePicker,\n  DatePicker,\n} from '@material-ui/pickers';\nimport DateFnsUtils from '@date-io/date-fns';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport DisplayValueTypography from './display-value-typography';\n\nconst styles = (theme) => ({\n  root: {\n    // We need to add a margin as the picker doesn't play well with the Material-UI label\n    marginTop: theme.spacing(2),\n  },\n});\n\nclass DateField extends React.PureComponent {\n  handleDateChange = (date) => {\n    this.props.component.setValue(date);\n  };\n\n  handleBlur = () => {\n    this.props.component.setTouched(true);\n  };\n\n  render() {\n    const {\n      component,\n      classes,\n      value,\n      includeTime,\n      editable,\n      useDisplayValue,\n      minDate,\n      maxDate,\n      fullWidth,\n      disabled,\n      accessEditable,\n      format,\n    } = this.props;\n\n    const dis = accessEditable === false || disabled;\n\n    let shrinkLabel = false;\n\n    const Component = includeTime ? DateTimePicker : DatePicker;\n\n    let fld = null;\n    if (editable && !useDisplayValue) {\n      // The picker doesn't play well with the label from Material-UI so we need to manually shrink\n      // the label when there is a value.\n      shrinkLabel = !!value;\n      fld = (\n        <MuiPickersUtilsProvider utils={DateFnsUtils}>\n          <span>\n            <Component\n              // Value cannot be undefined or else picker will default to today\n              value={value ? value : null}\n              onChange={this.handleDateChange}\n              clearable\n              className={classes.root}\n              minDate={minDate}\n              maxDate={maxDate}\n              onClose={this.handleBlur}\n              fullWidth={fullWidth}\n              disabled={dis}\n              id={component.getUniqueId()}\n              format={format}\n            />\n          </span>\n        </MuiPickersUtilsProvider>\n      );\n    } else {\n      fld = (\n        <DisplayValueTypography>\n          {component.getDisplayValue()}\n        </DisplayValueTypography>\n      );\n    }\n\n    return (\n      <CommonField component={component} shrinkLabel={shrinkLabel}>\n        {fld}\n      </CommonField>\n    );\n  }\n}\n\nDateField = withStyles(styles)(DateField);\n\nexport default attach([\n  'value',\n  'includeTime',\n  'editable',\n  'useDisplayValue',\n  'minDate',\n  'maxDate',\n  'fullWidth',\n  'disabled',\n  'format',\n])(DateField);\n","import React from 'react';\nimport Field from './fields/field';\nimport attach from './attach';\nimport access from 'mson/lib/access';\n\nclass Form extends React.PureComponent {\n  state = {\n    fieldsCanAccess: null,\n  };\n\n  // Enable automatic validation whenever a user changes data. This feature allows the user to see\n  // errors in real-time.\n  turnOnAutoValidate() {\n    this.props.component.set({ autoValidate: true });\n  }\n\n  calcFieldsCanAccess() {\n    const { component, mode } = this.props;\n    const canDowngrade = true;\n    const fieldsCanAccess = access.fieldsCanAccess(\n      // Default to update so that access control has a sensible default\n      mode ? mode : 'update',\n      component,\n      null,\n      canDowngrade\n    );\n\n    // We need to set the ignoreErrs state as there may be a field that is not accessible that is\n    // generating an error.\n    for (const field of component.getFields()) {\n      const ignoreErrs = fieldsCanAccess[field.get('name')] === undefined;\n      field.set({ ignoreErrs });\n    }\n\n    return fieldsCanAccess;\n  }\n\n  adjustAccess() {\n    let fieldsCanAccess = null;\n\n    // Was access specified? We check the form instead of this.props.access as this.props.access may\n    // not have been updated yet.\n    if (this.props.component.get('access')) {\n      fieldsCanAccess = this.calcFieldsCanAccess();\n    }\n\n    this.setState({ fieldsCanAccess });\n  }\n\n  constructor(props) {\n    super(props);\n    this.turnOnAutoValidate();\n\n    if (props.access) {\n      const fieldsCanAccess = this.calcFieldsCanAccess();\n      this.state.fieldsCanAccess = fieldsCanAccess;\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const { component, access, mode } = this.props;\n\n    // Did the form change?\n    if (prevProps.component !== component) {\n      this.turnOnAutoValidate();\n    }\n\n    // Did the access, mode or form change?\n    if (\n      prevProps.access !== access ||\n      prevProps.mode !== mode ||\n      prevProps.component !== component ||\n      prevProps.value !== this.props.value\n    ) {\n      this.adjustAccess();\n    }\n  }\n\n  handleSave = (event) => {\n    // Stop the form from refreshing the page. We can't rely on the default functionality as there\n    // may be form errors that need to stop the form from submitting.\n    event.preventDefault();\n\n    // No errors?\n    const { component } = this.props;\n\n    // Is the submit action enabled?\n    if (!component.get('disableSubmit')) {\n      component.setTouched(true);\n      component.validate();\n      if (component.getErrs().length === 0) {\n        component.submit();\n      }\n    }\n  };\n\n  render() {\n    const { component, formTag, isLoading, disabled } = this.props;\n    const { fieldsCanAccess } = this.state;\n    const fields = component.get('fields');\n\n    // Hide until the data has finished loading\n    if (isLoading) {\n      return null;\n    }\n\n    // The form key is needed or else React will not re-render all fields when the field indexes are\n    // the same and we switch from route to another.\n    const key = component.getKey();\n\n    const flds = fields.map((field, index) => {\n      if (\n        fieldsCanAccess === null ||\n        fieldsCanAccess[field.get('name')] !== undefined\n      ) {\n        let accessEditable = null;\n        if (\n          fieldsCanAccess !== null &&\n          fieldsCanAccess[field.get('name')] === 'read'\n        ) {\n          accessEditable = false;\n        }\n        return (\n          <Field\n            key={key + '_' + index}\n            component={field}\n            accessEditable={accessEditable}\n            disabled={disabled}\n          />\n        );\n      } else {\n        return null;\n      }\n    });\n\n    if (formTag !== false) {\n      return <form onSubmit={this.handleSave}>{flds}</form>;\n    } else {\n      return flds;\n    }\n  }\n}\n\nexport default attach([\n  'access',\n  'mode',\n  'isLoading',\n\n  // We listen for a change to fields so that we can render when a field is added\n  'change',\n  'value',\n])(Form);\n","import React from 'react';\nimport CommonField from './common-field';\nimport Component from '../component';\nimport attach from '../attach';\nimport FlexBreak from '../flex-break';\nimport withStyles from '@material-ui/core/styles/withStyles';\n\nconst styles = (theme) => ({\n  root: {\n    marginLeft: theme.spacing(2),\n\n    // The following flex properties are needed so that we can set a margin for all fields in the\n    // nested form\n    display: 'flex',\n    flexFlow: 'wrap',\n  },\n});\n\nclass FormField extends React.PureComponent {\n  render() {\n    const { component, hideLabel, classes, disabled } = this.props;\n\n    const isBlank = component.isBlank();\n\n    const form = component.get('form');\n\n    return (\n      <span>\n        {!hideLabel && (\n          <CommonField\n            component={component}\n            inlineLabel=\"true\"\n            shrinkLabel={!isBlank}\n            marginBottom={false}\n          />\n        )}\n        <FlexBreak />\n        <span className={classes.root}>\n          <Component component={form} formTag={false} disabled={disabled} />\n        </span>\n      </span>\n    );\n  }\n}\n\nFormField = withStyles(styles)(FormField);\n\nexport default attach([\n  'hideLabel',\n  'value', // Changes when the value is or isn't blank\n])(FormField);\n","import React from 'react';\nimport attach from './attach';\nimport Component from './component';\n\nclass Fragment extends React.PureComponent {\n  render() {\n    return (\n      <React.Fragment>\n        {this.props.items.map((item, index) => (\n          <Component component={item} key={index} />\n        ))}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default attach(['items'])(Fragment);\n","import React from 'react';\nimport attach from './attach';\nimport GridMui from '@material-ui/core/Grid';\nimport Component from './component';\n\nclass GridItem extends React.PureComponent {\n  render() {\n    const { hidden, content, xl, lg, md, sm, xs } = this.props;\n    if (hidden) {\n      return null;\n    } else {\n      return (\n        <GridMui item xl={xl} lg={lg} md={md} sm={sm} xs={xs}>\n          <Component component={content} />\n        </GridMui>\n      );\n    }\n  }\n}\n\nexport default attach(['hidden', 'content', 'xl', 'lg', 'md', 'sm', 'xs'])(\n  GridItem\n);\n","import React from 'react';\nimport attach from './attach';\nimport GridMui from '@material-ui/core/Grid';\nimport GridItem from './grid-item';\n\nclass Grid extends React.PureComponent {\n  render() {\n    return (\n      <GridMui container>\n        {this.props.items.map((item, index) => (\n          <GridItem component={item} key={index} />\n        ))}\n      </GridMui>\n    );\n  }\n}\n\nexport default attach(['items'])(Grid);\n","import React from 'react';\nimport IconButton from './icon-button';\nimport Grid from '@material-ui/core/Grid';\n\n// FUTURE: support for hamburger menus\nexport default class FormCardButtons extends React.PureComponent {\n  render() {\n    const {\n      forbidUpdate,\n      forbidDelete,\n      editable,\n      disabled,\n      archivedAt,\n      onEdit,\n      onDelete,\n      id,\n    } = this.props;\n\n    let updateButton = null;\n    if (!forbidUpdate) {\n      updateButton = (\n        <IconButton\n          onClick={onEdit}\n          icon=\"Edit\"\n          tooltip=\"Edit\"\n          aria-label={`Edit ${id}`}\n        />\n      );\n    }\n\n    let deleteButton = null;\n    if (!forbidDelete) {\n      const title = archivedAt ? 'Restore' : 'Delete';\n      deleteButton = (\n        <IconButton\n          onClick={onDelete}\n          icon={title}\n          tooltip={title}\n          aria-label={`Delete ${id}`}\n        />\n      );\n    }\n\n    if (editable && !disabled && (!forbidUpdate || !forbidDelete)) {\n      return (\n        <Grid item>\n          {updateButton}\n          {deleteButton}\n        </Grid>\n      );\n    } else {\n      return null;\n    }\n  }\n}\n","import React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport Component from './component';\nimport attach from './attach';\nimport FormCardButtons from './form-card-buttons';\n\nconst styles = (theme) => ({\n  paper: {\n    margin: theme.spacing(1),\n    padding: theme.spacing(2),\n  },\n  content: {\n    flex: 1,\n    cursor: 'pointer',\n  },\n});\n\n// Use PureComponent so that we avoid unnecessary re-rendering\nclass FormCard extends React.PureComponent {\n  handleClick = (event) => {\n    if (this.props.onClick) {\n      this.props.onClick(event, this.props.component);\n    }\n  };\n\n  handleEdit = (event, id) => {\n    if (this.props.onEdit) {\n      this.props.onEdit(event, this.props.component);\n    }\n  };\n\n  handleDelete = (event) => {\n    // this.handleMoreClose();\n    if (this.props.onDelete) {\n      this.props.onDelete(this.props.component);\n    }\n  };\n\n  render() {\n    const {\n      classes,\n      component,\n      forbidUpdate,\n      forbidDelete,\n      editable,\n      disabled,\n      value,\n      buttons,\n      id,\n    } = this.props;\n\n    let cardButtons;\n    if (buttons) {\n      cardButtons = <Component component={buttons} />;\n    } else {\n      cardButtons = (\n        <FormCardButtons\n          forbidUpdate={forbidUpdate}\n          forbidDelete={forbidDelete}\n          editable={editable}\n          disabled={disabled}\n          archivedAt={value.archivedAt}\n          onEdit={(event) => this.handleEdit(event)}\n          onDelete={(event) => this.handleDelete(event)}\n          id={id}\n        />\n      );\n    }\n\n    return (\n      <div>\n        <Paper className={classes.paper}>\n          <Grid container wrap=\"nowrap\">\n            <Grid\n              item\n              className={classes.content}\n              onClick={(event) => this.handleClick(event)}\n              role=\"button\"\n              aria-label={this.props['aria-label']}\n              id={id}\n            >\n              <Component component={component} formTag={false} mode=\"read\" />\n            </Grid>\n            {cardButtons}\n          </Grid>\n        </Paper>\n      </div>\n    );\n  }\n}\n\nFormCard = withStyles(styles)(FormCard);\nexport default attach(['value'])(FormCard);\n","import React from 'react';\nimport Button from './button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Component from './component';\nimport attach from './attach';\nimport CollectionFieldCore from 'mson/lib/fields/collection-field';\n\nclass FormDialog extends React.PureComponent {\n  state = { saveClicked: false, previousMode: null };\n\n  handleClose = (withCancelButton) => {\n    // Prevent the user from losing data when pressing esc or clicking outside dialog\n    const { mode, onClose, onCancel, currentForm } = this.props;\n    if (withCancelButton || mode !== 'update') {\n      if (mode === 'update') {\n        if (onCancel) {\n          onCancel(currentForm);\n        }\n      } else {\n        if (onClose) {\n          onClose(currentForm);\n        }\n      }\n    }\n  };\n\n  handleEdit = () => {\n    if (this.props.onEdit) {\n      this.props.onEdit(this.props.currentForm);\n    }\n  };\n\n  handleSave = (event) => {\n    // Stop the form from refreshing the page\n    event.preventDefault();\n\n    // Should the submit action be disabled? For example, we may be editing in a nested dialog\n    if (!this.props.disableSubmit) {\n      if (this.props.onSave) {\n        this.props.onSave();\n      }\n\n      // Disable the save button so that the user sees that something is being processed\n      this.setState({ saveClicked: true });\n    }\n  };\n\n  handleDelete = () => {\n    if (this.props.onDelete) {\n      this.props.onDelete(this.props.currentForm);\n    }\n  };\n\n  isOpen() {\n    const { mode } = this.props;\n    if (\n      mode === CollectionFieldCore.MODES.DELETE ||\n      mode === CollectionFieldCore.MODES.RESTORE\n    ) {\n      // Don't show the dialog when restoring\n      return false;\n    } else {\n      return !!mode;\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    // If the mode or err changes then allow the user to click save\n    if (\n      this.props.mode !== prevProps.mode ||\n      this.props.err !== prevProps.err\n    ) {\n      this.setState({ saveClicked: false });\n    }\n\n    if (this.props.mode !== prevProps.mode) {\n      this.setState({ previousMode: prevProps.mode });\n    }\n  }\n\n  render() {\n    const {\n      mode,\n      component,\n      forbidUpdate,\n      forbidDelete,\n      value,\n      fullScreen,\n    } = this.props;\n\n    const { saveClicked, previousMode } = this.state;\n\n    const disableSave =\n      component.hasErrorForTouchedField() ||\n      !component.get('dirty') ||\n      saveClicked;\n\n    const open = this.isOpen();\n\n    let buttons = null;\n\n    // Note: we analyze the previousMode so that the user isn't flashed with new buttons immediately\n    // after they click save or close the dialog\n    if (\n      mode === 'update' ||\n      mode === 'create' ||\n      (mode === null &&\n        (previousMode === 'update' || previousMode === 'create'))\n    ) {\n      buttons = (\n        <div>\n          {/* We use type=submit so that the form is submitted when the user presses enter */}\n          <Button\n            type=\"submit\"\n            label=\"Save\"\n            icon=\"Save\"\n            disabled={disableSave}\n          />\n          <Button\n            label=\"Cancel\"\n            icon=\"Cancel\"\n            onClick={() => this.handleClose(true)}\n          />\n        </div>\n      );\n    } else if (!forbidUpdate || !forbidDelete) {\n      buttons = (\n        <div>\n          {forbidUpdate ? (\n            ''\n          ) : (\n            <Button label=\"Edit\" icon=\"Edit\" onClick={this.handleEdit} />\n          )}\n          {forbidDelete ? (\n            ''\n          ) : (\n            <Button\n              label={value.archivedAt ? 'Restore' : 'Delete'}\n              icon={value.archivedAt ? 'Restore' : 'Delete'}\n              onClick={this.handleDelete}\n            />\n          )}\n          <Button\n            label=\"Close\"\n            icon=\"Cancel\"\n            onClick={() => this.handleClose(true)}\n          />\n        </div>\n      );\n    }\n\n    return (\n      <Dialog\n        // fullScreen will be true on a small screen\n        fullScreen={fullScreen}\n        open={open}\n        onClose={() => this.handleClose(false)}\n        aria-labelledby=\"form-dialog-title\"\n      >\n        {/* We use a form element so that we can submit the form on enter */}\n        <form onSubmit={this.handleSave}>\n          <DialogContent>\n            <Component component={component} formTag={false} mode={mode} />\n          </DialogContent>\n          {buttons ? <DialogActions>{buttons}</DialogActions> : ''}\n        </form>\n      </Dialog>\n    );\n  }\n}\n\nFormDialog = withMobileDialog()(FormDialog);\nFormDialog = attach(['err', 'dirty', 'value', 'mode', 'disableSubmit'])(\n  FormDialog\n);\nexport default FormDialog;\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nexport default class ConfirmationDialog extends React.PureComponent {\n  handleClose = (yes) => {\n    if (this.props.onClose) {\n      this.props.onClose(yes);\n    }\n  };\n\n  render() {\n    const { title, text, open, alert } = this.props;\n    return (\n      <div>\n        <Dialog\n          open={open}\n          onClose={() => this.handleClose(false)}\n          aria-labelledby=\"alert-dialog-title\"\n          aria-describedby=\"alert-dialog-description\"\n        >\n          <DialogTitle id=\"alert-dialog-title\">\n            {title ? title : ''}\n          </DialogTitle>\n          <DialogContent>\n            <DialogContentText id=\"alert-dialog-description\">\n              {text}\n            </DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            {alert ? null : (\n              <Button onClick={() => this.handleClose(false)} color=\"primary\">\n                No\n              </Button>\n            )}\n            <Button\n              onClick={() => this.handleClose(true)}\n              color=\"primary\"\n              autoFocus\n            >\n              {alert ? 'OK' : 'Yes'}\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport Icon from '../icon';\nimport withStyles from '@material-ui/core/styles/withStyles';\n\nconst styles = (theme) => ({\n  formControl: {\n    // Specify a more appropriate min width so that the field is wide enough to cover most labels\n    // minWidth: 120\n  },\n  flip: {\n    transform: 'scaleY(-1)',\n  },\n});\n\nclass SelectOrder extends React.PureComponent {\n  handleClick = () => {\n    const sortOrder = this.props.sortOrder === 'ASC' ? 'DESC' : 'ASC';\n    this.props.onChange({ sortOrder });\n  };\n\n  handleChange = (event) => {\n    this.props.onChange({ sortBy: event.target.value });\n  };\n\n  render() {\n    const { classes, sortBy, sortOrder, options } = this.props;\n\n    const flipped = sortOrder !== 'DESC';\n\n    const items = options.map((option) => {\n      return (\n        <MenuItem value={option.value} key={option.value}>\n          {option.label}\n        </MenuItem>\n      );\n    });\n\n    // If we wanted the icon as an adornment:\n    // <TextField\n    //   select\n    //   InputProps={{\n    //     startAdornment:\n    //     <InputAdornment position=\"start\">\n    //       <IconButton color=\"primary\" aria-label=\"new\" onClick={this.handleOrder}>\n    //         <Icon icon=\"Sort\" className={classes.flip} />\n    //       </IconButton>\n    //     </InputAdornment>,\n    //   }}\n    // >\n    //   <MenuItem value={10}>Ten</MenuItem>\n    //   <MenuItem value={20}>Twenty</MenuItem>\n    //   <MenuItem value={30}>Thirty</MenuItem>\n    // </TextField>\n    return (\n      <div>\n        <FormControl className={classes.formControl}>\n          {/*\n          <InputLabel>Sort by</InputLabel>\n          */}\n          <Select value={sortBy} onChange={this.handleChange}>\n            <MenuItem value=\"\">\n              <em>None</em>\n            </MenuItem>\n            {items}\n          </Select>\n        </FormControl>\n        <IconButton\n          color=\"primary\"\n          aria-label=\"sort order\"\n          onClick={this.handleClick}\n        >\n          <Icon icon=\"Sort\" className={flipped ? classes.flip : null} />\n        </IconButton>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles)(SelectOrder);\n","import React from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport FormCard from '../form-card';\nimport FormDialog from '../form-dialog';\nimport attach from '../attach';\nimport Button from '../button';\nimport Typography from '@material-ui/core/Typography';\nimport ConfirmationDialog from '../confirmation-dialog';\nimport access from 'mson/lib/access';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport './collection-field.css';\nimport SelectOrder from './select-order';\nimport ButtonField from 'mson/lib/fields/button-field';\nimport Icon from '../icon';\nimport CommonField from './common-field';\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\nimport CollectionFieldCore from 'mson/lib/fields/collection-field';\n\nconst getItemStyle = (isDragging, draggableStyle, theme) => ({\n  // some basic styles to make the items look a bit nicer\n  userSelect: 'none',\n  padding: theme.spacing(0.125),\n  margin: `0 0 ${theme.spacing(0.125)}px 0`,\n\n  // change background colour if dragging\n  background: isDragging ? theme.palette.secondary[400] : undefined,\n\n  // styles we need to apply on draggables\n  ...draggableStyle,\n});\n\nconst getListStyle = (isDraggingOver, theme) => ({\n  background: isDraggingOver ? theme.palette.grey[300] : undefined,\n  width: '100%',\n});\n\n// Note:\n//   - We use a dialog to view/edit the forms as we want to be able to display just a few pieces\n//     of data in the list and all the data when viewing/editing.\n\nconst styles = (theme) => ({\n  root: {\n    // Needed when field is nested in a form that is nested in a form, e.g. FormEditor\n    width: '100%',\n  },\n  spacer: {\n    backgroundColor: theme.palette.grey[300],\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    animation: 'fadeIn 1s infinite alternate',\n  },\n  footer: {\n    // Create space at the footer so that it is more evident to the user that the next page has been\n    // loaded\n    height: 50,\n    backgroundColor: theme.palette.grey[300],\n    margin: theme.spacing(1),\n    animation: 'fadeIn 1s infinite alternate',\n  },\n});\n\nclass CollectionField extends React.PureComponent {\n  state = {\n    sortBy: '',\n    sortOrder: 'ASC',\n  };\n\n  handleClose = () => {\n    this.props.component.set({ mode: null });\n  };\n\n  handleCancel = (form) => {\n    const { component, preventReadAction } = this.props;\n    if (component.get('skipRead') || preventReadAction) {\n      component.set({ mode: null });\n    } else {\n      component.set({\n        currentForm: form,\n        mode: CollectionFieldCore.MODES.READ,\n      });\n    }\n  };\n\n  handleClick = (form) => {\n    const { component } = this.props;\n    if (component.get('skipRead')) {\n      component.set({\n        currentForm: form,\n        mode: CollectionFieldCore.MODES.UPDATE,\n      });\n    } else {\n      component.set({\n        currentForm: form,\n        mode: CollectionFieldCore.MODES.READ,\n      });\n    }\n  };\n\n  handleEdit = (form) => {\n    this.props.component.set({\n      currentForm: form,\n      mode: CollectionFieldCore.MODES.UPDATE,\n    });\n  };\n\n  handleNew = () => {\n    this.props.component.set({\n      currentForm: null,\n      mode: CollectionFieldCore.MODES.CREATE,\n    });\n  };\n\n  handleSave = async () => {\n    await this.props.component.save();\n  };\n\n  handleDelete = async (formToDelete) => {\n    const { component } = this.props;\n\n    const form = formToDelete ? formToDelete : component.get('form');\n\n    const archivedAt = form.getValue('archivedAt');\n\n    // Are we restoring?\n    if (archivedAt) {\n      component.set({\n        currentForm: form,\n        mode: CollectionFieldCore.MODES.RESTORE,\n      });\n    } else if (formToDelete) {\n      component.set({\n        currentForm: formToDelete,\n        mode: CollectionFieldCore.MODES.DELETE,\n      });\n    }\n  };\n\n  handleConfirmationClose = async (yes) => {\n    const { component } = this.props;\n    if (yes) {\n      await component.archive(component.get('form'));\n    }\n    component.set({ mode: null });\n  };\n\n  canCreate() {\n    return access.canCreate(this.props.component.get('form'));\n  }\n\n  canUpdate() {\n    return access.canUpdate(this.props.component.get('form'));\n  }\n\n  canArchive() {\n    return access.canArchive(this.props.component.get('form'));\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.bufferTopId !== prevProps.bufferTopId) {\n      // Resize the spacer now that the newly prepended items have been rendered\n      this.props.component._infiniteLoader.resizeSpacer(this.props.bufferTopId);\n    }\n\n    if (this.props.spacerHeight !== prevProps.spacerHeight) {\n      this.props.component._infiniteLoader.setSpacerResizing(false);\n    }\n\n    if (this.props.change !== prevProps.change) {\n      this.props.component.set({ isLoading: false });\n    }\n  }\n\n  canDrag() {\n    const { forbidOrder, showArchived, searchString, order } = this.props;\n\n    // Can we order by dragging?\n    return !forbidOrder && !showArchived && !searchString && !order;\n  }\n\n  cards(canUpdate, canArchive) {\n    const {\n      component,\n      forbidUpdate,\n      forbidDelete,\n      forbidOrder,\n      editable,\n      disabled,\n      useDisplayValue,\n      theme,\n    } = this.props;\n\n    // Force to 1 colum when ordering allowed\n    const maxColumns = forbidOrder === false ? 1 : this.props.maxColumns;\n\n    const maxGrids = 12 / maxColumns;\n\n    let cards = [];\n\n    let index = 0;\n    for (const form of component.getForms()) {\n      // TODO: Rendering should not change form. Use utils.getIfDefined() in form to allow passing\n      // in of editable via React layer\n      form.setEditable(false);\n\n      // We need to use the id for the key as we use the same list of cards when toggling\n      // showArchive\n      const key = form.getUniqueId();\n\n      // Note: we use an id instead of ref so that more of our logic can be reused across different\n      // frameworks. We use the form id so that we have a consistent way of referencing the element\n      // for things like infinite loading.\n      const id = component.getUniqueItemId(component._getFormKey(form));\n\n      const formExtras = component.getFormExtras(form);\n\n      const item = (\n        <Grid item xs={12} sm={maxGrids} lg={maxGrids} key={key} id={id}>\n          <FormCard\n            onClick={() => this.handleClick(form)}\n            onEdit={() => this.handleEdit(form)}\n            onDelete={this.handleDelete}\n            component={form}\n            forbidUpdate={forbidUpdate || !canUpdate || useDisplayValue}\n            forbidDelete={forbidDelete || !canArchive || useDisplayValue}\n            editable={editable}\n            disabled={disabled}\n            buttons={formExtras?.buttons}\n            id={id}\n            aria-label={`View ${id}`}\n          />\n        </Grid>\n      );\n\n      if (this.canDrag()) {\n        cards.push(\n          <Draggable key={id} draggableId={id} index={index++}>\n            {(provided, snapshot) => (\n              <div\n                ref={provided.innerRef}\n                {...provided.draggableProps}\n                {...provided.dragHandleProps}\n                style={getItemStyle(\n                  snapshot.isDragging,\n                  provided.draggableProps.style,\n                  theme\n                )}\n                aria-label={`Drag ${id}`}\n              >\n                {item}\n              </div>\n            )}\n          </Draggable>\n        );\n      } else {\n        cards.push(item);\n      }\n    }\n\n    return cards;\n  }\n\n  handleOrdering = (props) => {\n    // TODO: shouldn't the ordering just be in the field and not have to be in this state?\n    this.setState(props, () => {\n      this.props.component.set({\n        order: this.state.sortBy\n          ? [[this.state.sortBy, this.state.sortOrder]]\n          : null,\n      });\n    });\n  };\n\n  sortOptions() {\n    const { component } = this.props;\n    if (component && component.get('form')) {\n      const form = component.get('form');\n      const fieldsCanAccess = access.fieldsCanAccess('read', form);\n      const fields = [];\n      form.eachField((field) => {\n        const name = field.get('name');\n\n        // Do we have access to the field? Allowed to sort? Not hidden? Not a button?\n        if (\n          fieldsCanAccess[name] !== undefined &&\n          !field.get('forbidSort') &&\n          !field.get('hidden') &&\n          !(field instanceof ButtonField)\n        ) {\n          fields.push({\n            value: (form.isDefaultField(name) ? '' : 'fieldValues.') + name,\n            label: field.get('label'),\n          });\n        }\n      });\n      return fields;\n    }\n  }\n\n  header(numCards) {\n    const {\n      forbidCreate,\n      editable,\n      disabled,\n      component,\n      forbidSort,\n      store,\n      useDisplayValue,\n    } = this.props;\n\n    const { sortBy, sortOrder } = this.state;\n\n    const singularLabel = component.getSingularLabel();\n\n    const reachedMax = component.reachedMax();\n\n    const canCreate = this.canCreate();\n\n    const showNewButton =\n      editable &&\n      !disabled &&\n      !useDisplayValue &&\n      !forbidCreate &&\n      !reachedMax &&\n      canCreate;\n\n    const canOrder = !forbidSort;\n\n    const sortOptions = this.sortOptions();\n\n    // Sorting only works when there is a backing store\n    const hasStore = !!store;\n    const showOrder = numCards > 0 && hasStore;\n\n    return (\n      <Grid container spacing={0}>\n        <Grid item xs={12} sm={6} lg={6}>\n          {showNewButton ? (\n            <Button\n              aria-label=\"new\"\n              onClick={this.handleNew}\n              icon=\"Add\"\n              label={'New ' + singularLabel}\n              marginTop={false}\n            />\n          ) : null}\n        </Grid>\n        <Grid item xs={12} sm={6} lg={6} align=\"right\">\n          {showOrder && canOrder ? (\n            <SelectOrder\n              onChange={this.handleOrdering}\n              sortBy={sortBy}\n              sortOrder={sortOrder}\n              options={sortOptions}\n            />\n          ) : null}\n        </Grid>\n      </Grid>\n    );\n  }\n\n  onDragEnd = (result) => {\n    // dropped outside the list\n    if (!result.destination) {\n      return;\n    }\n\n    if (result.destination.index !== result.source.index) {\n      this.props.component.moveAndSaveForm({\n        sourceIndex: result.source.index,\n        destinationIndex: result.destination.index,\n      });\n    }\n  };\n\n  // TODO: how to prevent re-rendering of all form-cards when dialog open state is changed? Or, does\n  // it not really matter as we are using PureComponents?\n  field() {\n    const {\n      forbidUpdate,\n      forbidDelete,\n      component,\n      spacerHeight,\n      classes,\n      isLoading,\n      form,\n      currentForm,\n      noResults,\n      disabled,\n      accessEditable,\n      useDisplayValue,\n      theme,\n      preventUpdate,\n      preventDeleteAction,\n      mode,\n    } = this.props;\n\n    const dis = accessEditable === false || disabled;\n\n    let confirmationOpen = false;\n    let confirmationTitle = null;\n    if (\n      !preventDeleteAction &&\n      currentForm &&\n      mode === CollectionFieldCore.MODES.DELETE &&\n      !currentForm.getValue('archivedAt')\n    ) {\n      confirmationOpen = true;\n      // confirmationTitle: `Are you sure you want to delete this ${singularLabel}?`\n      confirmationTitle = 'Delete this?';\n    }\n\n    const label = component.get('label').toLowerCase();\n\n    const canUpdate = this.canUpdate();\n    const canArchive = this.canArchive();\n\n    const spacerStyle = { height: spacerHeight };\n\n    const spacerId = component.get('spacerId');\n\n    let cards = this.cards(canUpdate, canArchive);\n\n    let cardContainer = cards;\n\n    if (this.canDrag()) {\n      cardContainer = (\n        <DragDropContext onDragEnd={this.onDragEnd}>\n          <Droppable droppableId=\"droppable\">\n            {(provided, snapshot) => (\n              <div\n                ref={provided.innerRef}\n                style={getListStyle(snapshot.isDraggingOver, theme)}\n              >\n                {cards}\n                {provided.placeholder}\n              </div>\n            )}\n          </Droppable>\n        </DragDropContext>\n      );\n    }\n\n    const searchString = component.get('searchString');\n\n    // Is the user searching and there are no records?\n    const showNoRecords = searchString && noResults;\n\n    const header = this.header(cards.length);\n\n    return (\n      <div>\n        {header}\n\n        {showNoRecords ? (\n          <Typography variant=\"h4\">\n            <Icon icon=\"Info\" /> No {label} found\n          </Typography>\n        ) : null}\n\n        <div id={spacerId} className={classes.spacer} style={spacerStyle} />\n\n        <Grid container spacing={0}>\n          {cardContainer}\n        </Grid>\n\n        {isLoading ? <div className={classes.footer} /> : null}\n\n        {/* TODO: would it be better to have a single, global FormDialog instance? Or, is it better\n        to have multiple instances so that you can have different memory spaces. Currenly we have a\n        hybrid where we have a dialog per form. There is almost certainly more overhead in having an\n        instance per record, right? */}\n        <FormDialog\n          component={form}\n          currentForm={currentForm}\n          onClose={this.handleClose}\n          onCancel={this.handleCancel}\n          onSave={this.handleSave}\n          onEdit={this.handleEdit}\n          onDelete={this.handleDelete}\n          forbidUpdate={\n            forbidUpdate ||\n            !canUpdate ||\n            dis ||\n            useDisplayValue ||\n            preventUpdate\n          }\n          forbidDelete={\n            forbidDelete ||\n            !canArchive ||\n            dis ||\n            useDisplayValue ||\n            preventDeleteAction\n          }\n        />\n\n        <ConfirmationDialog\n          open={confirmationOpen}\n          onClose={this.handleConfirmationClose}\n          title={confirmationTitle}\n        />\n      </div>\n    );\n  }\n\n  render() {\n    const { component, hideLabel, classes } = this.props;\n\n    const isBlank = component.isBlank();\n\n    return (\n      <span className={classes.root}>\n        {!hideLabel && (\n          <CommonField\n            component={component}\n            inlineLabel=\"true\"\n            shrinkLabel={!isBlank}\n          />\n        )}\n        {this.field()}\n      </span>\n    );\n  }\n}\n\nCollectionField = withStyles(styles, { withTheme: true })(CollectionField);\nCollectionField = attach([\n  'change',\n  'label',\n  'singularLabel',\n  'forbidCreate',\n  'forbidUpdate',\n  'forbidDelete',\n  'forbidSort',\n  'forbidOrder',\n  'editable',\n  'disabled',\n  'spacerHeight',\n  'bufferTopId',\n  'isLoading',\n  'form',\n  'currentForm',\n  'mode',\n  'noResults',\n  'store',\n  'maxColumns',\n  'useDisplayValue',\n  'hideLabel',\n  'showArchived',\n  'searchString',\n  'order',\n  'preventReadAction',\n  'preventUpdate',\n  'preventDeleteAction',\n  'buttonsFactory',\n])(CollectionField);\nexport default CollectionField;\n","import React from 'react';\nimport Field from './field';\nimport IconButton from '@material-ui/core/IconButton';\nimport Icon from '../icon';\nimport FlexBreak from '../flex-break';\nimport attach from '../attach';\nimport HelpToolTip from './help-tool-tip';\n\nclass ListItemField extends React.PureComponent {\n  handleDelete = () => {\n    this.props.component.emit('delete');\n  };\n\n  render() {\n    // Note: allowDelete and help have to be passed in as a prop as it is really the parent's values\n    // that we need\n    const { component, allowDelete, help, disabled, editable } = this.props;\n\n    if (component) {\n      const block = component.get('block');\n      return (\n        <span>\n          <Field component={component} block={false} disabled={disabled} />\n          {allowDelete && !disabled && editable ? (\n            <IconButton aria-label=\"Delete\" onClick={this.handleDelete}>\n              <Icon icon=\"DeleteIcon\" />\n            </IconButton>\n          ) : null}\n          {help && editable ? <HelpToolTip help={help} /> : ''}\n          {block ? <FlexBreak /> : null}\n        </span>\n      );\n    } else {\n      // component can be falsy if it was just deleteed\n      return null;\n    }\n  }\n}\n\n// We want the component to update when the value changes as blank fields should not display a\n// delete button\nexport default attach(['value', 'disabled', 'editable'])(ListItemField);\n","import React from 'react';\nimport ListItemField from './list-item-field';\nimport attach from '../attach';\nimport Button from '../button';\nimport CommonField from './common-field';\n\nclass ListField extends React.PureComponent {\n  handleNew = () => {\n    this.props.component.createField();\n\n    // Reset the touched state so that errors aren't reported immediately when the user hasn't\n    // finished entering the new value.\n    this.props.component.set({ touched: false });\n  };\n\n  render() {\n    const {\n      component,\n      allowDelete,\n      useDisplayValue,\n      autoCreateFields,\n      hideLabel,\n      editable,\n      canDeleteEmpty,\n      accessEditable,\n      disabled,\n      hideDeleteButton,\n    } = this.props;\n\n    const singularLabel = component.getSingularLabel();\n\n    const dis = accessEditable === false || disabled;\n\n    let fields = [];\n    let first = true;\n\n    const isBlank = component.isBlank();\n\n    component.eachField((field, index) => {\n      const fieldIsBlank = field.isBlank();\n\n      // When using the display value, we hide any blank fields, e.g. the empty \"next\" fields\n      if (first || !useDisplayValue || !fieldIsBlank) {\n        // We have to pass allowDelete as it is the allowDelete of the parent\n        fields.push(\n          <ListItemField\n            component={field}\n            key={index}\n            allowDelete={\n              allowDelete &&\n              !useDisplayValue &&\n              (canDeleteEmpty || !fieldIsBlank) &&\n              !hideDeleteButton\n            }\n            disabled={disabled}\n          />\n        );\n      }\n\n      if (first) {\n        first = false;\n      }\n    });\n\n    if (!autoCreateFields && !useDisplayValue && editable && !dis) {\n      fields.push(\n        <Button\n          key=\"button\"\n          aria-label=\"add\"\n          onClick={this.handleNew}\n          icon=\"Add\"\n          label={'Add ' + (singularLabel ? singularLabel : '')}\n          marginTop={false}\n        />\n      );\n    }\n\n    return (\n      <span>\n        {!hideLabel && (\n          <CommonField\n            component={component}\n            inlineLabel=\"true\"\n            marginBottom={false}\n            shrinkLabel={!isBlank}\n          />\n        )}\n        <div>{fields}</div>\n      </span>\n    );\n  }\n}\n\n// We want the component to update when we receive new fields\nexport default attach([\n  'change',\n  'help',\n  'allowDelete',\n  'useDisplayValue',\n  'autoCreateFields',\n  'hideLabel',\n  'value',\n  'editable',\n  'canDeleteEmpty',\n  'disabled',\n  'hideDeleteButton',\n  'singularLabel',\n  'label',\n])(ListField);\n","import React from 'react';\nimport attach from '../attach';\nimport ReCAPTCHA from 'react-google-recaptcha';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport globals from 'mson/lib/globals';\n\nconst styles = (theme) => ({\n  captcha: {\n    margin: theme.spacing(1),\n  },\n});\n\nclass ReCAPTCHAField extends React.PureComponent {\n  handleChange = (value) => {\n    this.props.component.setValue(value);\n  };\n\n  render() {\n    const {\n      disabled,\n      editable,\n      accessEditable,\n      classes,\n      useDisplayValue,\n    } = this.props;\n\n    const isEditable = accessEditable !== false && editable && !disabled;\n\n    const siteKey = globals.get('reCAPTCHASiteKey');\n\n    if (isEditable && !useDisplayValue) {\n      return (\n        <div className={classes.captcha}>\n          <ReCAPTCHA\n            ref=\"recaptcha\"\n            sitekey={siteKey}\n            onChange={this.handleChange}\n          />\n        </div>\n      );\n    } else {\n      return null;\n    }\n  }\n}\n\nReCAPTCHAField = withStyles(styles)(ReCAPTCHAField);\n\nexport default attach(['disabled', 'editable', 'useDisplayValue'])(\n  ReCAPTCHAField\n);\n","import React from 'react';\nimport classNames from 'classnames';\nimport Select from 'react-select';\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport Paper from '@material-ui/core/Paper';\nimport Chip from '@material-ui/core/Chip';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Icon from '../icon';\nimport { emphasize } from '@material-ui/core/styles/colorManipulator';\n\nconst styles = (theme) => ({\n  input: {\n    display: 'flex',\n    padding: 0,\n    minWidth: 240, // A good default for most labels\n    height: 'auto',\n  },\n  valueContainer: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    flex: 1,\n    alignItems: 'center',\n\n    // Adjust for MUI label\n    marginTop: theme.spacing(2) + 5,\n  },\n  chip: {\n    margin: `${theme.spacing(1)}px ${theme.spacing(0.25)}px`,\n  },\n  chipFocused: {\n    backgroundColor: emphasize(\n      theme.palette.type === 'light'\n        ? theme.palette.grey[300]\n        : theme.palette.grey[700],\n      0.08\n    ),\n  },\n  noOptionsMessage: {\n    padding: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\n  },\n  singleValue: {\n    fontSize: theme.typography.subtitle1.fontSize,\n  },\n  // placeholder: {\n  //   position: 'absolute',\n  //   left: 2,\n  //   fontSize: theme.typography.subtitle1.fontSize\n  // },\n  paper: {\n    position: 'absolute',\n    zIndex: 1,\n\n    // Adjust for MUI label\n    // marginTop: theme.spacing.unit * 7\n    marginTop: theme.spacing(1),\n  },\n  root: {\n    // Allow for help icon to be placed on right of field\n    display: 'inline-flex',\n  },\n  fullWidth: {\n    width: '100%',\n  },\n  disabled: {\n    color: theme.palette.text.secondary,\n  },\n});\n\nfunction NoOptionsMessage(props) {\n  return (\n    <Typography\n      color=\"textSecondary\"\n      className={props.selectProps.classes.noOptionsMessage}\n      {...props.innerProps}\n    >\n      {props.children}\n    </Typography>\n  );\n}\n\nfunction inputComponent({ inputRef, ...props }) {\n  return <div ref={inputRef} {...props} />;\n}\n\nfunction Control(props) {\n  const optionalProps = {};\n  if (props.selectProps.fullWidth) {\n    optionalProps.fullWidth = true;\n  }\n  return (\n    <TextField\n      {...optionalProps}\n      InputProps={{\n        inputComponent,\n        inputProps: {\n          className: props.selectProps.classes.input,\n          inputRef: props.innerRef,\n          children: props.children,\n          // We need to specify the aria-label so that this element is the one that receives focus\n          // for the target field label\n          'aria-label': props.selectProps.ariaLabel,\n          ...props.innerProps,\n        },\n      }}\n      {...props.selectProps.textFieldProps}\n    />\n  );\n}\n\nfunction Option(props) {\n  return (\n    <MenuItem\n      buttonRef={props.innerRef}\n      selected={props.isFocused}\n      component=\"div\"\n      style={{\n        fontWeight: props.isSelected ? 500 : 400,\n      }}\n      {...props.innerProps}\n    >\n      {props.children}\n    </MenuItem>\n  );\n}\n\n// Note: kept in case we want to implement the placeholder in the future\n// function Placeholder(props) {\n//   return (\n//     <Typography\n//       color=\"textSecondary\"\n//       className={props.selectProps.classes.placeholder}\n//       {...props.innerProps}\n//     >\n//       {props.children}\n//     </Typography>\n//   );\n// }\n\nfunction SingleValue(props) {\n  return (\n    <Typography\n      className={classNames(\n        props.selectProps.classes.singleValue,\n        props.selectProps.isDisabled ? props.selectProps.classes.disabled : null\n      )}\n      {...props.innerProps}\n    >\n      {props.children}\n    </Typography>\n  );\n}\n\nfunction ValueContainer(props) {\n  return (\n    <div className={props.selectProps.classes.valueContainer}>\n      {props.children}\n    </div>\n  );\n}\n\nfunction MultiValue(props) {\n  return (\n    <Chip\n      tabIndex={-1}\n      label={props.children}\n      className={classNames(props.selectProps.classes.chip, {\n        [props.selectProps.classes.chipFocused]: props.isFocused,\n        [props.selectProps.classes.disabled]: props.selectProps.isDisabled,\n      })}\n      onDelete={props.removeProps.onClick}\n      deleteIcon={\n        <Icon\n          icon=\"Cancel\"\n          aria-label=\"Remove\"\n          role=\"button\"\n          aria-hidden=\"false\"\n        />\n      }\n    />\n  );\n}\n\nfunction Menu(props) {\n  return (\n    <Paper\n      square\n      className={props.selectProps.classes.paper}\n      {...props.innerProps}\n    >\n      {props.children}\n    </Paper>\n  );\n}\n\nconst components = {\n  Control,\n  Menu,\n  MultiValue,\n  NoOptionsMessage,\n  Option,\n  // Placeholder,\n  SingleValue,\n  ValueContainer,\n};\n\nclass AutoCompleteSelect extends React.Component {\n  render() {\n    const {\n      classes,\n      options,\n      isClearable,\n      placeholder,\n      onChange,\n      onBlur,\n      onFocus,\n      onInputChange,\n      value,\n      isDisabled,\n      fullWidth,\n      isMulti,\n      id,\n    } = this.props;\n\n    const selectStyles = {\n      dropdownIndicator: (base) => ({\n        ...base,\n        cursor: 'pointer',\n      }),\n      clearIndicator: (base) => ({\n        ...base,\n        cursor: 'pointer',\n      }),\n\n      // Needed so that the menu appears above any dialog windows\n      menuPortal: (base) => ({\n        ...base,\n        zIndex: 2000,\n      }),\n    };\n\n    return (\n      <Select\n        id={id}\n        className={classNames(classes.root, fullWidth && classes.fullWidth)}\n        classes={classes}\n        styles={selectStyles}\n        options={options}\n        components={components}\n        value={value}\n        onChange={onChange}\n        onBlur={onBlur}\n        onFocus={onFocus}\n        onInputChange={onInputChange}\n        placeholder={placeholder}\n        isClearable={isClearable}\n        isDisabled={isDisabled}\n        fullWidth={fullWidth}\n        isMulti={isMulti}\n        // Needed so that the menu is not clipped by the app's root level overflow:hidden or when it\n        // appears in a dialog window\n        menuPortalTarget={document.body}\n        // Specify ariaLabel instead of aria-label as it is the Control that needs to render the\n        // aria-label\n        ariaLabel={this.props['aria-label']}\n      />\n    );\n  }\n}\n\nexport default withStyles(styles)(AutoCompleteSelect);\n","import React from 'react';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Input from '@material-ui/core/Input';\nimport Chip from '@material-ui/core/Chip';\nimport CommonField from './common-field';\nimport attach from '../attach';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport DisplayValueTypography from './display-value-typography';\nimport AutoCompleteSelect from './autocomplete-select';\n\nconst styles = (theme) => ({\n  formControl: {\n    // Specify a more appropriate min width so that the field is wide enough to cover most labels\n    minWidth: 120,\n  },\n  chip: {\n    margin: theme.spacing(0.25),\n  },\n});\n\nclass SelectField extends React.PureComponent {\n  state = {\n    focus: false,\n  };\n\n  handleChange(value) {\n    this.props.component.setValue(value);\n  }\n\n  handleAutocompleteChange(value) {\n    const { multiple } = this.props;\n    if (multiple) {\n      this.handleChange(value ? value.map((val) => val.value) : null);\n    } else {\n      this.handleChange(value && (value.value ? value.value : null));\n    }\n  }\n\n  handleFocus() {\n    this.setState({ focus: true });\n  }\n\n  handleBlur() {\n    this.setState({ focus: false });\n    this.props.component.setTouched(true);\n  }\n\n  renderOptions() {\n    const { options, blankString, value, multiple } = this.props;\n\n    if (options) {\n      let opts = [];\n\n      if (!multiple && blankString) {\n        // Note: the blankString doesn't make sense when we allow multiple selections\n        opts.push(\n          <MenuItem value=\"\" key=\"\">\n            <em>{blankString}</em>\n          </MenuItem>\n        );\n      }\n\n      options.forEach((option) => {\n        if (multiple) {\n          const checked = value ? value.indexOf(option.value) !== -1 : false;\n          opts.push(\n            <MenuItem value={option.value} key={option.value}>\n              <Checkbox checked={checked} />\n              <ListItemText primary={option.label} />\n            </MenuItem>\n          );\n        } else {\n          opts.push(\n            <MenuItem value={option.value} key={option.value}>\n              {option.label}\n            </MenuItem>\n          );\n        }\n      });\n\n      return opts;\n    }\n  }\n\n  render() {\n    const {\n      value,\n      err,\n      touched,\n      disabled,\n      component,\n      fullWidth,\n      classes,\n      editable,\n      multiple,\n      accessEditable,\n      useDisplayValue,\n      options,\n      autocomplete,\n    } = this.props;\n\n    const { focus } = this.state;\n\n    const dis = accessEditable === false || disabled;\n\n    let fieldValue = multiple ? [] : '';\n    if (value) {\n      fieldValue = value;\n    }\n\n    let input = undefined;\n    let renderValue = undefined;\n    if (multiple) {\n      input = <Input />;\n\n      renderValue = (selected) => (\n        <div className={classes.chips}>\n          {selected.map((value) => (\n            <Chip\n              key={value}\n              label={component.getOptionLabel(value)}\n              className={classes.chip}\n            />\n          ))}\n        </div>\n      );\n    }\n\n    const optionalProps = {};\n\n    let fld = null;\n    const ariaLabel = component.get('label');\n    if (editable && !useDisplayValue) {\n      if (autocomplete) {\n        let autocompleteValue = null;\n\n        if (multiple) {\n          autocompleteValue = fieldValue.map((value) => ({\n            value: value,\n            label: component.getOptionLabel(value),\n          }));\n        } else {\n          autocompleteValue = {\n            value: fieldValue,\n            label: component.getOptionLabel(fieldValue),\n          };\n        }\n\n        // Shrink the label?\n        if (focus || !component.isValueBlank(fieldValue)) {\n          optionalProps.shrinkLabel = true;\n        }\n\n        fld = (\n          <AutoCompleteSelect\n            id={component.getUniqueId()}\n            options={options}\n            isClearable={true}\n            placeholder=\"\"\n            onChange={(value) => this.handleAutocompleteChange(value)}\n            onBlur={() => this.handleBlur()}\n            onFocus={() => this.handleFocus()}\n            value={autocompleteValue}\n            isDisabled={dis}\n            fullWidth={fullWidth}\n            isMulti={multiple}\n            aria-label={ariaLabel}\n          />\n        );\n      } else {\n        fld = (\n          <Select\n            id={component.getUniqueId()}\n            multiple={multiple}\n            error={touched && err ? true : false}\n            onChange={(event) => this.handleChange(event.target.value)}\n            onBlur={() => this.handleBlur()}\n            input={input}\n            renderValue={renderValue}\n            value={fieldValue}\n            disabled={dis}\n            fullWidth={fullWidth}\n            className={classes.formControl}\n            aria-label={ariaLabel}\n          >\n            {this.renderOptions()}\n          </Select>\n        );\n      }\n    } else {\n      let displayValue = null;\n      if (multiple && value) {\n        displayValue = value.map((val) => (\n          <Chip\n            key={val}\n            label={component.getOptionLabel(val)}\n            className={classes.chip}\n          />\n        ));\n      } else {\n        displayValue = component.getDisplayValue();\n      }\n      fld = (\n        <DisplayValueTypography aria-label={ariaLabel}>\n          {displayValue}\n        </DisplayValueTypography>\n      );\n    }\n\n    return (\n      <CommonField component={component} {...optionalProps}>\n        {fld}\n      </CommonField>\n    );\n  }\n}\n\nSelectField = withStyles(styles)(SelectField);\n\nexport default attach([\n  'value',\n  'err',\n  'options',\n  'touched',\n  'blankString',\n  'disabled',\n  'fullWidth',\n  'editable',\n  'multiple',\n  'useDisplayValue',\n  'autocomplete',\n])(SelectField);\n","import React from 'react';\nimport attach from './attach';\nimport AppBar from '@material-ui/core/AppBar';\nimport TabsMui from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Icon from './icon';\n\nclass Tabs extends React.Component {\n  handleChange = (event, value) => {\n    const { component, items } = this.props;\n    component.set({ value });\n\n    const itemName = items[value].name;\n    component.emitChange(itemName);\n  };\n\n  render() {\n    const { items, value } = this.props;\n\n    // FUTURE: option to make this fixed under the main app bar?\n    return (\n      <AppBar\n        position=\"static\"\n        color=\"default\"\n        elevation={1} // tone down the elevation>\n      >\n        <TabsMui\n          value={value}\n          onChange={this.handleChange}\n          indicatorColor=\"primary\"\n          textColor=\"primary\"\n          scrollButtons=\"auto\"\n          variant=\"fullWidth\"\n        >\n          {items.map((item, index) => (\n            <Tab\n              label={item.label}\n              icon={<Icon icon={item.icon} />}\n              key={index}\n            />\n          ))}\n        </TabsMui>\n      </AppBar>\n    );\n  }\n}\n\nTabs = attach(['items', 'value'])(Tabs);\n\nexport default Tabs;\n","import React from 'react';\nimport attach from '../attach';\nimport CommonField from './common-field';\nimport { MuiPickersUtilsProvider, TimePicker } from '@material-ui/pickers';\nimport DateFnsUtils from '@date-io/date-fns';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport DisplayValueTypography from './display-value-typography';\n\nconst styles = (theme) => ({\n  root: {\n    // We need to add a margin as the picker doesn't play well with the Material-UI label\n    marginTop: theme.spacing(2),\n  },\n});\n\nclass TimeField extends React.PureComponent {\n  handleDateChange = (date) => {\n    this.props.component.setValue(date);\n  };\n\n  handleBlur = () => {\n    this.props.component.setTouched(true);\n  };\n\n  render() {\n    const {\n      component,\n      classes,\n      value,\n      editable,\n      useDisplayValue,\n      showSeconds,\n      fullWidth,\n      disabled,\n      accessEditable,\n    } = this.props;\n\n    const dis = accessEditable === false || disabled;\n\n    let shrinkLabel = false;\n\n    let fld = null;\n    if (editable && !useDisplayValue) {\n      // The picker doesn't play well with the label from Material-UI so we need to manually shrink\n      // the label when there is a value.\n      shrinkLabel = !!value;\n      fld = (\n        <MuiPickersUtilsProvider utils={DateFnsUtils}>\n          <span>\n            <TimePicker\n              // Value cannot be undefined or else picker will default to today\n              value={value ? value : null}\n              onChange={this.handleDateChange}\n              clearable\n              className={classes.root}\n              seconds={showSeconds}\n              // The minDate and maxDate are not used as they are confusing. They impose a\n              // restriction on the actual day, which doesn't make sense as the time is store as a\n              // timestamp with today's date and therefore the days may not match. Moreover, the\n              // picker doesn't change when these dates are specified so we can just handle the\n              // validation at the MSON-core layer. TODO: we can implement these ranges in the\n              // MSON-core layer by constructing dates with the current day and specified time from\n              // minDate and maxDate.\n              // minDate={minDate}\n              // maxDate={maxDate}\n\n              onClose={this.handleBlur}\n              fullWidth={fullWidth}\n              disabled={dis}\n              invalidDateMessage=\"\" // Let CommonField display the error\n              // format=\"M/d/YYYY h:m a\"\n            />\n          </span>\n        </MuiPickersUtilsProvider>\n      );\n    } else {\n      fld = (\n        <DisplayValueTypography>\n          {component.getDisplayValue()}\n        </DisplayValueTypography>\n      );\n    }\n\n    return (\n      <CommonField component={component} shrinkLabel={shrinkLabel}>\n        {fld}\n      </CommonField>\n    );\n  }\n}\n\nTimeField = withStyles(styles)(TimeField);\n\nexport default attach([\n  'value',\n  'editable',\n  'useDisplayValue',\n  'showSeconds',\n  'fullWidth',\n  'disabled',\n])(TimeField);\n","import React from 'react';\nimport attach from './attach';\nimport Typography from '@material-ui/core/Typography';\nimport ReactMarkdown from 'react-markdown';\n\nclass Text extends React.PureComponent {\n  render() {\n    const { text } = this.props;\n\n    // We use component=div to force usage of a div, instead of a p, as properly formatted HTML\n    // cannot nest tags like h1 under a <p>.\n    return (\n      <Typography component=\"div\">\n        <ReactMarkdown source={text} />\n      </Typography>\n    );\n  }\n}\n\nText = attach(['text'])(Text);\nexport default Text;\n","import React from 'react';\nimport Input from '@material-ui/core/Input';\nimport CommonField from './common-field';\nimport attach from '../attach';\nimport DisplayValueTypography from './display-value-typography';\nimport MaskedInput from 'react-text-mask';\n\nclass TextField extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    // Create a custom TextMask component. This is done once in the constructor so that it is not\n    // done in each call to render()\n    this.TextMaskCustom = (props) => {\n      const { inputRef, ...other } = props;\n      const { mask } = this.props;\n\n      return (\n        <MaskedInput\n          {...other}\n          ref={(ref) => {\n            inputRef(ref ? ref.inputElement : null);\n          }}\n          mask={mask}\n        />\n      );\n    };\n  }\n\n  handleChange = (event) => {\n    const { component } = this.props;\n    const value = component.fromUIValue(event.target.value);\n    component.setValue(value);\n  };\n\n  handleBlur = () => {\n    this.props.component.setTouched(true);\n  };\n\n  handleKeyUp = (event) => {\n    // If the user presses enter on the field then mark as touched. This is necessary for when the\n    // user is using the keyboard to enter data and there is an error on the last field that needs\n    // to be reported when the user presses enter.\n    if (event.keyCode === 13) {\n      this.props.component.setTouched(true);\n    }\n  };\n\n  render() {\n    const {\n      err,\n      maxLength,\n      touched,\n      disabled,\n      component,\n      fullWidth,\n      type,\n      editable,\n      accessEditable,\n      multiline,\n      rows,\n      rowsMax,\n      useDisplayValue,\n      mask,\n      displayValue,\n    } = this.props;\n\n    const dis = accessEditable === false || disabled;\n\n    let fld = null;\n    if (editable && !useDisplayValue) {\n      const optional = {};\n      if (mask) {\n        optional.inputComponent = this.TextMaskCustom;\n      }\n      const uiValue = component.getUIValue();\n\n      fld = (\n        <Input\n          id={component.getUniqueId()}\n          error={touched && err ? true : false}\n          inputProps={{\n            maxLength: maxLength,\n          }}\n          onChange={this.handleChange}\n          onBlur={this.handleBlur}\n          onKeyUp={this.handleKeyUp}\n          value={uiValue ? uiValue : ''}\n          disabled={dis}\n          fullWidth={fullWidth}\n          type={type}\n          multiline={multiline}\n          rows={rows}\n          rowsMax={rowsMax}\n          {...optional}\n        />\n      );\n    } else {\n      fld = (\n        <DisplayValueTypography\n          id={component.getUniqueId()}\n          // We need to specify the aria-label so that this element is linked to the target field\n          // label\n          aria-label={component.get('label')}\n        >\n          {displayValue ? displayValue : component.getDisplayValue()}\n        </DisplayValueTypography>\n      );\n    }\n\n    return <CommonField component={component}>{fld}</CommonField>;\n  }\n}\n\nexport default attach([\n  'value',\n  'err',\n  'maxLength',\n  'touched',\n  'disabled',\n  'fullWidth',\n  'type',\n  'editable',\n  'multiline',\n  'rows',\n  'rowsMax',\n  'useDisplayValue',\n  'mask',\n  'unmask',\n])(TextField);\n","import React from 'react';\nimport TextField from './text-field';\nimport attach from '../attach';\n\nclass URLField extends React.PureComponent {\n  render() {\n    const {\n      component,\n      value,\n      editable,\n      useDisplayValue,\n      newWindow,\n    } = this.props;\n\n    let displayValue = null;\n\n    // Note: editable & useDisplayValue are checked to avoid unnecessary rendering\n    if ((!editable || useDisplayValue) && value) {\n      let href = value;\n      if (href.indexOf('http') !== 0) {\n        href = 'http://' + href;\n      }\n      displayValue = (\n        <a href={href} target={newWindow ? '_blank' : '_self'}>\n          {value}\n        </a>\n      );\n    }\n\n    return <TextField component={component} displayValue={displayValue} />;\n  }\n}\n\nexport default attach(['value', 'editable', 'useDisplayValue', 'newWindow'])(\n  URLField\n);\n","// NOTE: this file should only contain the component registrations\n\nimport ButtonField from './fields/button-field';\nimport BooleanField from './fields/boolean-field';\nimport Card from './card';\nimport ComponentField from './fields/component-field';\nimport CompositeField from './fields/composite-field';\nimport DateField from './fields/date-field';\nimport Field from './fields/field';\nimport Form from './form';\nimport FormField from './fields/form-field';\nimport Fragment from './fragment';\nimport Grid from './grid';\nimport GridItem from './grid-item';\nimport CollectionField from './fields/collection-field';\nimport ListField from './fields/list-field';\nimport ReCAPTCHAField from './fields/re-captcha-field';\nimport SelectField from './fields/select-field';\nimport Tabs from './tabs';\nimport TimeField from './fields/time-field';\nimport Text from './text';\nimport TextField from './fields/text-field';\nimport URLField from './fields/url-field';\n\nconst components = {\n  ButtonField,\n  BooleanField,\n  Card,\n  ChainedSelectField: CompositeField,\n  ChainedSelectListField: ListField,\n  ComponentField,\n  CompositeField,\n  DateField,\n  Field,\n  Form,\n  FormField,\n  Fragment,\n  Grid,\n  GridItem,\n  CollectionField,\n  IdField: TextField,\n  IntegerField: TextField,\n  ListField,\n  MoneyField: TextField,\n  NumberField: TextField,\n  PhoneField: TextField,\n  ReCAPTCHAField,\n  SelectField,\n  SelectListField: ListField,\n  Tabs,\n  TimeField,\n  Text,\n  TextField,\n  TextListField: ListField,\n  URLField,\n  User: Form,\n};\n\nexport default components;\n","import components from './components';\nimport compiler from 'mson/lib/compiler';\n\nclass Utils {\n  getUIComponent(component) {\n    const name = component.getClassName();\n    const Component = components[name];\n    if (Component !== undefined) {\n      return Component;\n    } else if (compiler.isCompiled(compiler.getComponent(name))) {\n      const Parent = Object.getPrototypeOf(component.constructor);\n      return this.getUIComponent(new Parent());\n    } else {\n      // The React component wasn't found so check the MSON layer to see if we can automatically\n      // determine the component from any MSON.\n      const ancestorName = compiler.getOldestCompiledAncestor(name);\n      const Ancestor = compiler.getComponent(ancestorName);\n      return this.getUIComponent(new Ancestor());\n    }\n  }\n}\n\nexport default new Utils();\n","import React from 'react';\nimport componentUtils from './component-utils';\n\nexport default class InnerComponent extends React.PureComponent {\n  handleChange = (name, value) => {\n    const { on, component } = this.props;\n\n    // Generic handler\n    if (on) {\n      on({ name, value, component });\n    }\n\n    // Handler for specific event\n    const handlerName = 'on' + name.charAt(0).toUpperCase() + name.slice(1);\n    if (this.props[handlerName]) {\n      this.props[handlerName]({ value, component });\n    }\n  };\n\n  addChangeListener() {\n    this.props.component.on('$change', this.handleChange);\n\n    // Emit a mount event so that the component can load any initial data, etc... We emit this event\n    // here and not in componentDidMount() as the component may actually be set after\n    // componentDidMount() was run.\n    this.props.component.emitChange('mount');\n  }\n\n  removeChangeListener() {\n    this.props.component.removeListener('$change', this.handleChange);\n  }\n\n  componentDidMount() {\n    if (this.props.component) {\n      this.addChangeListener();\n    }\n  }\n\n  componentWillUnmount() {\n    // Emit a unmount event so that we can perform any needed clean up\n    this.props.component.emitChange('unmount');\n\n    this.removeChangeListener();\n  }\n\n  componentDidUpdate(prevProps) {\n    // Is the component changing?\n    if (this.props.component !== prevProps.component) {\n      // Recreate the listener\n      this.removeChangeListener();\n      this.addChangeListener();\n    }\n  }\n\n  render() {\n    const { component, ...others } = this.props;\n\n    if (component) {\n      const Component = componentUtils.getUIComponent(component);\n      return <Component component={component} {...others} />;\n    } else {\n      return null;\n    }\n  }\n}\n","import React from 'react';\nimport InnerComponent from './inner-component';\nimport compiler from 'mson/lib/compiler';\nimport attach from './attach';\n\nexport class Component extends React.PureComponent {\n  state = { component: null };\n\n  createComponent() {\n    const { definition } = this.props;\n    this.setState({ component: compiler.newComponent(definition) });\n  }\n\n  componentDidMount() {\n    if (this.props.definition) {\n      this.createComponent();\n    }\n  }\n\n  componentWillUnmount() {\n    const { component } = this.state;\n\n    // Did we use a definition to define a component in the state?\n    if (component) {\n      // Fire the unmount before we destroy the component so that the event is not lost\n      component.emitChange('unmount');\n\n      // Remove all listeners to prevent listener leaks\n      this.state.component.destroy();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    // Is the definition changing?\n    if (this.props.definition !== prevProps.definition) {\n      this.createComponent();\n    }\n  }\n\n  render() {\n    const { definition, component, ...childProps } = this.props;\n    let comp = component;\n\n    // Should we use the component generated from the definition?\n    if (!component) {\n      comp = this.state.component;\n    }\n\n    // Note: the component can be falsy, e.g. it has not yet been defined\n    if (comp && comp.get('hidden')) {\n      return null;\n    } else {\n      return <InnerComponent component={comp} {...childProps} />;\n    }\n  }\n}\n\nexport default attach(['hidden'])(Component);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport withStyles from '@material-ui/core/styles/withStyles';\n// import Button from '@material-ui/core/Button';\nimport SnackbarMUI from '@material-ui/core/Snackbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Icon from './icon';\n\nconst styles = (theme) => ({\n  close: {\n    padding: theme.spacing(0.5),\n  },\n});\n\nclass Snackbar extends React.PureComponent {\n  handleClose = (event, reason) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n\n    if (this.props.onClose) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    const { classes, message, open } = this.props;\n    return (\n      <SnackbarMUI\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'left',\n        }}\n        open={open}\n        autoHideDuration={6000}\n        onClose={this.handleClose}\n        ContentProps={{\n          'aria-describedby': 'message-id',\n        }}\n        message={<span id=\"message-id\">{message}</span>}\n        action={[\n          // <Button key=\"undo\" color=\"secondary\" size=\"small\" onClick={this.handleClose}>\n          //   UNDO\n          // </Button>,\n          <IconButton\n            key=\"close\"\n            aria-label=\"Close\"\n            color=\"inherit\"\n            className={classes.close}\n            onClick={this.handleClose}\n          >\n            <Icon icon=\"Close\" />\n          </IconButton>,\n        ]}\n      />\n    );\n  }\n}\n\nSnackbar.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(Snackbar);\n","// TODO:\n//   - On mobile when using search bar, display title and search icon. When user clicks icon then\n//     hides title and allows for search string to be entered.\n\nimport React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport Icon from './icon';\nimport Menu from './menu';\nimport SearchBar from './search-bar';\nimport { Switch, Route } from 'react-router-dom';\nimport Component from './component';\nimport ComponentMSON from 'mson/lib/component';\n// import compiler from 'mson/lib/compiler';\nimport { withRouter } from 'react-router';\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\nimport attach from './attach';\nimport globals from 'mson/lib/globals';\nimport Snackbar from './snackbar';\nimport ConfirmationDialog from './confirmation-dialog';\nimport MUISwitch from '@material-ui/core/Switch';\n// import UserMenu from './user-menu';\nimport Action from 'mson/lib/actions/action';\nimport CollectionField from 'mson/lib/fields/collection-field';\nimport Form from 'mson/lib/form';\nimport access from 'mson/lib/access';\nimport registrar from 'mson/lib/compiler/registrar';\n\nconst drawerWidth = 240;\n\nconst styles = (theme) => ({\n  root: {\n    width: '100%',\n    // height: 430,\n    // marginTop: theme.spacing.unit * 3,\n    zIndex: 1,\n    overflow: 'hidden',\n  },\n  appFrame: {\n    position: 'relative',\n    display: 'flex',\n    width: '100%',\n    height: '100%',\n  },\n  appBar: {\n    position: 'fixed',\n    marginLeft: drawerWidth,\n  },\n  appBarResponsive: {\n    [theme.breakpoints.up('md')]: {\n      width: `calc(100% - ${drawerWidth}px)`,\n    },\n  },\n  navIconHide: {\n    [theme.breakpoints.up('md')]: {\n      display: 'none',\n    },\n  },\n  content: {\n    backgroundColor: theme.palette.background.default,\n    width: '100%',\n    padding: theme.spacing(3),\n    height: 'calc(100% - 56px)',\n    marginTop: 56,\n    [theme.breakpoints.up('sm')]: {\n      height: 'calc(100% - 64px)',\n      marginTop: 64,\n    },\n\n    // Disable Chrome's Scroll Anchoring as it causes problems with infinite scrolling when\n    // scrolling up. Specifically, the scroll location is locked after items are prepended to the\n    // top of the list before the spacer is resized.\n    overflowAnchor: 'none',\n  },\n  contentResponsive: {\n    // Also needed to extend menu vertically\n    [theme.breakpoints.up('md')]: {\n      marginLeft: drawerWidth,\n    },\n  },\n  alignRight: {\n    marginLeft: 'auto', // right align\n  },\n});\n\n// TODO: break up into components for header, menu, body, etc...\nclass App extends React.PureComponent {\n  state = {\n    mobileOpen: false,\n    menuItem: null,\n    snackbarOpen: false,\n    snackbarMessage: '',\n    confirmationOpen: false,\n    nextMenuItem: null,\n    showArchivedToggle: false,\n\n    // Note: we need both searchStringInput and globals.searchString as searchStringInput is the\n    // controlled value for the text input and globals.searchString is the actual string with which\n    // we are searching. These values not the same as we expect the user to submit the search before\n    // it is performed so that we don't search on every keystroke. FUTURE: wait a little bit after\n    // characters have been entered and then automatically search.\n    searchStringInput: '',\n    showSearch: false,\n\n    showSearchOnMobile: false,\n\n    // isLoggedIn: false\n  };\n\n  form = null;\n\n  path = null;\n\n  constructor(props) {\n    super(props);\n    this.setGlobalOnNavigate();\n  }\n\n  onNavigate = (callback) => {\n    // We don't warn about discarding changes when fullScreen, e.g. a login page\n    const menuItem = this.state.menuItem;\n    if (\n      menuItem &&\n      menuItem.producedContent.has('dirty') &&\n      menuItem.producedContent.get('dirty') &&\n      !menuItem.fullScreen\n    ) {\n      // Show a confirmation dialog to see if the user wants to continue\n      globals.displayConfirmation({\n        title: 'Discard changes?',\n        callback,\n      });\n    } else {\n      // Nothing is dirty so allow the navigation to continue\n      callback(true);\n    }\n  };\n\n  setGlobalOnNavigate() {\n    globals.setOnNavigate(this.onNavigate);\n  }\n\n  handleDrawerToggle = () => {\n    this.setState({ mobileOpen: !this.state.mobileOpen });\n  };\n\n  redirect(path) {\n    const { history } = this.props;\n\n    // Clear the redirectPath so that back-to-back redirects to the same route are considered\n    // unique, e.g. if / routes to /somepage and then the user hits back.\n    globals.set({ redirectPath: null });\n\n    history.push(path);\n  }\n\n  navigateTo(path) {\n    const { component } = this.props;\n    const menu = component.get('menu');\n    const item = menu.getItemAndParsePath(path);\n    return this.switchContent(item.item, item.params);\n  }\n\n  handleNavigate = async (menuItem) => {\n    this.props.history.push(menuItem.path);\n  };\n\n  handleConfirmationClose = async (yes) => {\n    const { confirmation } = this.props;\n    if (confirmation.callback && yes) {\n      // Allow/prohibit the route change\n      confirmation.callback(yes);\n    }\n    this.setState({ confirmationOpen: false });\n  };\n\n  canArchive(currentComponent) {\n    let canArchive = false;\n    let canSearch = false;\n    if (currentComponent && currentComponent instanceof Form) {\n      for (const field of currentComponent.getFields()) {\n        if (field instanceof CollectionField) {\n          canArchive =\n            !field.get('forbidViewArchived') &&\n            access.canArchive(field.get('form'));\n          canSearch = !field.get('forbidSearch');\n        }\n      }\n    }\n    return {\n      canArchive,\n      canSearch,\n    };\n  }\n\n  emitLoggedOut() {\n    globals.set({ redirectAfterLogin: this.props.location.pathname });\n    this.props.component.emitLoggedOut();\n  }\n\n  requireAccess(roles) {\n    const canAccess =\n      !roles || (registrar.client && registrar.client.user.hasRole(roles));\n    if (!canAccess) {\n      this.emitLoggedOut();\n    }\n    return canAccess;\n  }\n\n  switchContent = async (menuItem, parameters) => {\n    const { currentComponent } = this.state;\n\n    // Prevent infinite recursion when menuItem is null by making sure that the menuItem is\n    // changing before changing anything else; especially the state\n    if (currentComponent) {\n      // Emit an unload event so that the component can unload any data, etc...\n      currentComponent.emitUnload();\n    }\n\n    // Note: menuItem can be null if there is no content on the landing page\n    const content = menuItem && menuItem.content;\n\n    if (content) {\n      const { location, component } = this.props;\n      const menu = component.get('menu');\n      globals.set({\n        route: menu.toRoute({\n          parameters,\n          queryString: location.search.substr(1),\n          hash: location.hash.substr(1),\n        }),\n      });\n\n      const parentItem = menu.getParent(menuItem.path);\n      if (\n        this.requireAccess(menuItem.roles) &&\n        (!parentItem || this.requireAccess(parentItem.roles))\n      ) {\n        let producedContent = null;\n\n        if (content instanceof Action) {\n          // Execute the actions\n          producedContent = await content.run({ component: content });\n        } else {\n          producedContent = content;\n        }\n\n        // producedContent can be null if content is an action, which doesn't generate a\n        // component. And, producedContent can also be something other than a Component if content\n        // is an action that returns a non-component\n        if (producedContent && producedContent instanceof ComponentMSON) {\n          // TODO: we are mutating the menuItem object directory. Would it be better to promote\n          // the MenuItem to a component and set the producedContent there?\n          menuItem.producedContent = producedContent;\n\n          const newComponent = producedContent;\n\n          // Emit a load event so that the component can load any initial data, etc...\n          newComponent.emitLoad();\n\n          const { canArchive, canSearch } = this.canArchive(newComponent);\n\n          globals.set({ searchString: null });\n\n          // Set showArchived to false whenever we change the route\n          this.setState({\n            menuItem,\n            showArchived: false,\n            showArchivedToggle: canArchive,\n            searchStringInput: '',\n            showSearch: canSearch,\n            currentComponent: newComponent,\n          });\n        }\n      }\n    } else {\n      this.setState({ currentComponent: null });\n    }\n  };\n\n  onLocation = (location) => {\n    globals.set({\n      path: location.pathname,\n      pathHash: location.hash,\n      pathSearch: location.search,\n    });\n  };\n\n  componentDidUpdate(prevProps) {\n    const snackbarMessage = globals.get('snackbarMessage');\n    if (snackbarMessage) {\n      this.displaySnackbar(snackbarMessage);\n      globals.set({ snackbarMessage: null });\n    }\n\n    if (\n      this.props.redirectPath &&\n      this.props.redirectPath !== prevProps.redirectPath\n    ) {\n      this.redirect(this.props.redirectPath);\n    }\n\n    if (\n      this.props.path !== prevProps.path ||\n      this.props.pathHash !== prevProps.pathHash ||\n      this.props.pathSearch !== prevProps.pathSearch\n    ) {\n      this.navigateTo(this.props.path);\n    }\n\n    if (this.props.confirmation !== prevProps.confirmation) {\n      // Show the popup if any of the confirmation info has changed\n      this.setState({ confirmationOpen: true });\n    }\n\n    if (this.props.searchString !== prevProps.searchString) {\n      // Pass search string down to current component\n      const menuItem = this.state.menuItem;\n      if (menuItem && menuItem.producedContent.has('searchString')) {\n        menuItem.producedContent.set({\n          searchString: this.props.searchString,\n        });\n      }\n    }\n  }\n\n  componentDidMount() {\n    // Allows us to listen to back and forward button clicks\n    this.unlisten = this.props.history.listen(this.onLocation);\n\n    if (registrar.client) {\n      // Wait for the session to load before loading the initial component so that we can do things\n      // like route based on a user's role\n      registrar.client.user.awaitSession();\n    }\n\n    // Load the correct component based on the initial path\n    this.onLocation(this.props.location);\n\n    // TODO: is this too inefficient in that it cascades a lot of unecessary events? Instead, could:\n    // 1. move more logic to app layer so that only cascade when need new window 2. use something\n    // like a global scroll listener that the component can use when it is active\n    window.addEventListener('scroll', (e) => {\n      const { menuItem } = this.state;\n      if (menuItem) {\n        menuItem.producedContent.emit('scroll', e);\n      }\n    });\n\n    // Handle immediate redirects, e.g. if user is not logged in\n    if (this.props.redirectPath) {\n      this.redirect(this.props.redirectPath);\n    }\n  }\n\n  componentWillUnmount() {\n    this.unlisten();\n  }\n\n  displaySnackbar(message) {\n    this.setState({ snackbarOpen: true, snackbarMessage: message });\n  }\n\n  handleSnackbarClose = () => {\n    this.setState({ snackbarOpen: false });\n  };\n\n  handleArchivedChange = (event) => {\n    this.setState({ showArchived: event.target.checked });\n\n    const { menuItem } = this.state;\n\n    if (menuItem) {\n      menuItem.producedContent.set({ showArchived: event.target.checked });\n\n      // Scroll to the top of the page as otherwise it is confusing to the user as to why they are\n      // dumped in some random place within the newly queried data.\n      window.scrollTo({\n        top: 0,\n      });\n    }\n  };\n\n  handleSearchStringInputChange = (searchStringInput) => {\n    this.setState({\n      searchStringInput,\n    });\n  };\n\n  handleSearch = (searchStringInput) => {\n    this.setState(\n      {\n        searchStringInput,\n      },\n      () => {\n        globals.set({\n          searchString: searchStringInput ? searchStringInput : null,\n        });\n      }\n    );\n  };\n\n  archivedToggle() {\n    const { showArchived, showArchivedToggle } = this.state;\n\n    // A component must not switch from controlled to uncontrolled so we need to avoid setting\n    // checked=undefined\n    const showArchivedChecked = showArchived ? true : false;\n\n    let archivedToggle = null;\n    if (showArchivedToggle) {\n      archivedToggle = (\n        <Tooltip title={showArchived ? 'Show Active' : 'Show Deleted'}>\n          <MUISwitch\n            onChange={this.handleArchivedChange}\n            checked={showArchivedChecked}\n          />\n        </Tooltip>\n      );\n    }\n\n    return archivedToggle;\n  }\n\n  searchBox(fullWidth) {\n    const { classes } = this.props;\n    const { searchStringInput, showSearch } = this.state;\n\n    let searchBox = null;\n    if (showSearch) {\n      searchBox = (\n        <SearchBar\n          fullWidth={fullWidth}\n          className={classes.alignRight}\n          searchString={searchStringInput}\n          onChange={this.handleSearchStringInputChange}\n          onSearch={this.handleSearch}\n        />\n      );\n    }\n    return searchBox;\n  }\n\n  toggleShowSearch = () => {\n    this.setState({ showSearchOnMobile: !this.state.showSearchOnMobile });\n  };\n\n  menuButton() {\n    const { classes } = this.props;\n    const responsive = this.isResponsive();\n    return (\n      <IconButton\n        color=\"inherit\"\n        aria-label=\"open drawer\"\n        onClick={this.handleDrawerToggle}\n        className={responsive ? classes.navIconHide : ''}\n      >\n        <Icon icon=\"Menu\" />\n      </IconButton>\n    );\n  }\n\n  title() {\n    const { menuItem } = this.state;\n    return (\n      <Typography variant=\"h6\" color=\"inherit\" noWrap>\n        {menuItem ? menuItem.label : ''}\n      </Typography>\n    );\n  }\n\n  appBar() {\n    const { classes, width } = this.props;\n    const { showSearchOnMobile } = this.state;\n\n    const onMobile = isWidthDown('sm', width);\n    const responsive = this.isResponsive();\n\n    let bar = null;\n\n    if (onMobile) {\n      if (showSearchOnMobile) {\n        bar = (\n          <React.Fragment>\n            <IconButton\n              color=\"inherit\"\n              aria-label=\"close search\"\n              onClick={this.toggleShowSearch}\n            >\n              <Icon icon=\"ArrowBack\" />\n            </IconButton>\n            {this.searchBox(true)}\n          </React.Fragment>\n        );\n      } else {\n        bar = (\n          <React.Fragment>\n            {this.menuButton()}\n            {this.title()}\n            {this.archivedToggle()}\n            <IconButton\n              color=\"inherit\"\n              aria-label=\"toggle search\"\n              onClick={this.toggleShowSearch}\n              className={classes.alignRight}\n            >\n              <Icon icon=\"Search\" />\n            </IconButton>\n          </React.Fragment>\n        );\n      }\n    } else {\n      bar = (\n        <React.Fragment>\n          {this.menuButton()}\n          {this.title()}\n          {this.archivedToggle()}\n          {this.searchBox()}\n        </React.Fragment>\n      );\n    }\n\n    return (\n      <AppBar\n        elevation={1} // tone down the elevation\n        className={\n          classes.appBar + (responsive ? ` ${classes.appBarResponsive}` : '')\n        }\n      >\n        <Toolbar>{bar}</Toolbar>\n      </AppBar>\n    );\n  }\n\n  isResponsive() {\n    return !this.props.menuAlwaysTemporary;\n  }\n\n  render() {\n    const { classes, component, confirmation } = this.props;\n    const {\n      mobileOpen,\n      menuItem,\n      snackbarOpen,\n      snackbarMessage,\n      confirmationOpen,\n      currentComponent,\n    } = this.state;\n\n    const responsive = this.isResponsive();\n\n    const menu = component.get('menu');\n\n    // Use the path from the location prop as this.state.path may not be up to date\n    const path = this.props.location.pathname;\n\n    const comp = currentComponent ? (\n      <Component component={currentComponent} />\n    ) : null;\n\n    const appBar = this.appBar();\n\n    const menuSidebar = (\n      <Menu\n        component={menu}\n        onDrawerToggle={this.handleDrawerToggle}\n        mobileOpen={mobileOpen}\n        onNavigate={this.handleNavigate}\n        path={path}\n        responsive={responsive}\n      />\n    );\n\n    let fullScreenStyle = null;\n    if (menuItem && menuItem.fullScreen) {\n      fullScreenStyle = {\n        marginLeft: 0,\n        marginTop: 0,\n      };\n    }\n\n    return (\n      <div className={classes.root}>\n        <div className={classes.appFrame}>\n          {menuItem && menuItem.fullScreen ? null : appBar}\n          {menuItem && menuItem.fullScreen ? null : menuSidebar}\n          <main\n            className={\n              classes.content +\n              (responsive ? ` ${classes.contentResponsive}` : '')\n            }\n            style={fullScreenStyle}\n          >\n            <Switch>\n              {/* Omitting path so that all paths are matched */}\n              <Route />\n            </Switch>\n\n            {comp}\n\n            <Snackbar\n              open={snackbarOpen}\n              message={snackbarMessage}\n              onClose={this.handleSnackbarClose}\n            />\n            <ConfirmationDialog\n              open={confirmationOpen}\n              onClose={this.handleConfirmationClose}\n              title={confirmation ? confirmation.title : null}\n              text={confirmation ? confirmation.text : null}\n              alert={confirmation ? confirmation.alert : null}\n            />\n          </main>\n        </div>\n      </div>\n    );\n  }\n}\n\nApp = withStyles(styles, { withTheme: true })(App);\nApp = withWidth()(App);\nApp = withRouter(App);\nApp = attach(['menuAlwaysTemporary'])(App);\nApp = attach(\n  [\n    'path',\n    'pathHash',\n    'pathSearch',\n    'redirectPath',\n    'snackbarMessage',\n    'confirmation',\n    'searchString',\n  ],\n  globals\n)(App);\nexport default App;\n","import React from 'react';\nimport AppUI from './app';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { ThemeProvider as MuiThemeProvider } from '@material-ui/core/styles';\nimport createMuiTheme from '@material-ui/core/styles/createMuiTheme';\nimport blueGrey from '@material-ui/core/colors/blueGrey';\nimport lightBlue from '@material-ui/core/colors/lightBlue';\nimport { BrowserRouter, Prompt } from 'react-router-dom';\nimport globals from 'mson/lib/globals';\nimport attach from './attach';\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: blueGrey,\n    // primary: blue,\n    // type: 'dark',\n    // secondary: cyan\n    secondary: lightBlue,\n  },\n\n  // TODO: remove after next major Material-UI release\n  // (https://material-ui.com/style/typography/#migration-to-typography-v2)\n  typography: {\n    useNextVariants: true,\n  },\n\n  // shadows: ['none']\n});\n\n// Note: BrowserRouter needs to be outside of App so that we can use withRouter\nclass AppContainer extends React.Component {\n  onNavigate = (message, callback) => {\n    globals.onNavigate(message, callback);\n  };\n\n  render() {\n    const { component, basename } = this.props;\n    return (\n      <MuiThemeProvider theme={theme}>\n        <CssBaseline />\n        <BrowserRouter\n          getUserConfirmation={this.onNavigate}\n          basename={basename}\n        >\n          {/* Wrapping div required by BrowserRouter */}\n          <div>\n            <AppUI component={component} />\n\n            {/* A Prompt is needed to capture back/forward button events with ReactRouter. message\n            is required, but the value is arbitrary */}\n            <Prompt message=\"foo\" />\n          </div>\n        </BrowserRouter>\n      </MuiThemeProvider>\n    );\n  }\n}\n\nexport default attach(['basename'])(AppContainer);\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport AppContainer from './app-container';\nimport registrar from 'mson/lib/compiler/registrar';\nimport registerServiceWorker from './register-service-worker';\n\nconst render = async (app) => {\n  // Was the client registered?\n  if (registrar.client) {\n    // Make sure we load the session before doing any rendering so that components can do their\n    // initial rendering based on the user's authentication status\n    await registrar.client.user.awaitSession();\n  }\n\n  ReactDOM.render(\n    <AppContainer component={app} />,\n    document.getElementById('root')\n  );\n  registerServiceWorker();\n};\n\nexport default render;\n","const app = {\n  name: 'app.App',\n  component: 'App',\n  // menuAlwaysTemporary: true,\n  basename: '/mson-react', // Root of site is https://redgeoff.github.io/mson-react\n  menu: {\n    component: 'Menu',\n    items: [\n      {\n        path: '/',\n        label: 'Home',\n        content: {\n          component: 'app.Home',\n        },\n      },\n      {\n        path: '/fields',\n        label: 'Fields',\n        content: {\n          component: 'app.FieldsScreen',\n        },\n      },\n      {\n        path: '/contacts',\n        label: 'Contacts',\n        items: [\n          {\n            path: '/contacts',\n            label: 'Contacts LocalStorage',\n            content: {\n              component: 'app.ContactsLocalStorage',\n            },\n          },\n          {\n            path: '/contacts-firebase',\n            label: 'Contacts Firebase',\n            content: {\n              component: 'app.ContactsFirebase',\n            },\n          },\n        ],\n      },\n      {\n        path: '/tasks',\n        label: 'Tasks',\n        items: [\n          {\n            path: '/tasks',\n            label: 'Tasks LocalStorage',\n            content: {\n              component: 'app.TasksLocalStorage',\n            },\n          },\n          {\n            path: '/tasks-firebase',\n            label: 'Tasks Firebase',\n            content: {\n              component: 'app.TasksFirebase',\n            },\n          },\n        ],\n      },\n      {\n        path: '/form-builder',\n        label: 'Form Builder',\n        content: {\n          component: 'app.FormBuilder',\n        },\n      },\n      {\n        path: '/contact/edit',\n        label: 'Edit Contact',\n        content: {\n          component: 'app.EditContact',\n        },\n      },\n      {\n        path: '/contact-no-mson',\n        label: 'Contact No MSON',\n        content: {\n          component: 'app.ContactNoMSON',\n        },\n      },\n      {\n        path: '/grid',\n        label: 'Grid',\n        content: {\n          component: 'app.Grid',\n        },\n      },\n      {\n        path: '/router',\n        label: 'Router',\n        items: [\n          {\n            path: '/router/redirect',\n            label: 'Redirect',\n            content: {\n              component: 'Action',\n              actions: [\n                {\n                  component: 'Redirect',\n                  path:\n                    '/router/person/p123/message/m456?first=Trevor&last=Noah#hash123',\n                },\n              ],\n            },\n          },\n          {\n            path: '/router/generate-component',\n            label: 'Generate Component',\n            content: {\n              component: 'app.GenerateComponent',\n            },\n          },\n        ],\n      },\n      {\n        path: '/router/person/:personId/message/:messageId',\n        label: 'Router',\n        content: {\n          component: 'app.Router',\n        },\n        hidden: true, // Register route, but don't expose it in the menu\n      },\n    ],\n  },\n};\n\nexport default app;\n","import Form from 'mson/lib/form';\nimport { TextField, EmailField, ButtonField } from 'mson/lib/fields';\nimport compiler from 'mson/lib/compiler';\nimport globals from 'mson/lib/globals';\n\n// Note: you can also use the following instead of the import above\n// const Form = compiler.getCompiledComponent('Form');\n\nclass ContactNoMSON extends Form {\n  _create(props) {\n    super._create(props);\n\n    this.set({\n      fields: [\n        new TextField({\n          name: 'firstName',\n          label: 'First Name',\n          required: true,\n          block: false,\n        }),\n        new TextField({ name: 'lastName', label: 'Last Name', required: true }),\n        new EmailField({ name: 'email', label: 'Email' }),\n        new ButtonField({\n          name: 'import',\n          label: 'Import',\n          icon: 'ImportContacts',\n        }),\n        new ButtonField({\n          name: 'submit',\n          label: 'Submit',\n          type: 'submit',\n          icon: 'Save',\n        }),\n        new ButtonField({ name: 'cancel', label: 'Cancel', icon: 'Cancel' }),\n      ],\n    });\n\n    this.on('import', () => {\n      this.setValues({\n        firstName: 'Prince',\n        lastName: 'Nelson',\n        email: 'prince@example.com',\n      });\n    });\n\n    this.on('submit', () => {\n      // TODO: do something like contact an API\n\n      const values = this.getValues();\n      console.log('submitting', values);\n\n      globals.displaySnackbar(\n        `Submitted ${values.firstName} ${values.lastName}`\n      );\n\n      // Clear the values, in case we return to the Contact form later\n      this.reset();\n    });\n\n    this.on('cancel', () => {\n      // Redirect home\n      globals.redirect('/');\n    });\n  }\n}\n\ncompiler.registerComponent('app.ContactNoMSON', ContactNoMSON);\n","const contacts = {\n  name: 'app.Contacts',\n  component: 'Form',\n  schema: {\n    component: 'Form',\n    fields: [\n      {\n        name: 'store',\n        component: 'Field',\n      },\n    ],\n  },\n  fields: [\n    {\n      component: 'CollectionField',\n      name: 'contacts',\n      label: 'Contacts',\n      hideLabel: true,\n      // forbidCreate: true,\n      // forbidUpdate: true,\n      // forbidDelete: true,\n      // forbidViewArchived: true,\n      // forbidSearch: true,\n      // forbidSort: true,\n      formFactory: {\n        component: 'Factory',\n        product: {\n          component: 'Form',\n          fields: [\n            {\n              name: 'firstName',\n              component: 'TextField',\n              label: 'First Name',\n              required: true,\n              block: false,\n            },\n            {\n              name: 'lastName',\n              component: 'TextField',\n              label: 'Last Name',\n            },\n            {\n              name: 'email',\n              component: 'EmailField',\n              label: 'Email',\n            },\n          ],\n        },\n      },\n      store: '{{store}}',\n    },\n  ],\n};\n\nexport default contacts;\n","const chainedSelectOptions = [\n  { value: 1, parentValue: null, label: 'Germany' },\n  { value: 2, parentValue: null, label: 'USA' },\n\n  { value: 3, parentValue: 1, label: 'BMW' },\n  { value: 4, parentValue: 1, label: 'Mercedes' },\n\n  { value: 5, parentValue: 2, label: 'Tesla' },\n\n  { value: 6, parentValue: 3, label: 'i3' },\n  { value: 7, parentValue: 3, label: 'i8' },\n  { value: 8, parentValue: 4, label: 'S-Class' },\n\n  { value: 9, parentValue: 5, label: 'Model S' },\n\n  { value: 10, parentValue: 9, label: 'Red' },\n  { value: 11, parentValue: 9, label: 'Blue' },\n];\n\nconst fields = {\n  name: 'app.Fields',\n  component: 'Form',\n  fields: [\n    {\n      component: 'AddressField',\n      name: 'addressField',\n      label: 'AddressField',\n      help: 'Example help',\n      required: true,\n      elevate: false,\n    },\n\n    {\n      component: 'BooleanField',\n      name: 'booleanField',\n      label: 'BooleanField',\n      help: 'Example help',\n    },\n\n    {\n      name: 'buttonField',\n      component: 'ButtonField',\n      label: 'ButtonField',\n      icon: 'Save',\n      type: 'submit',\n      block: true,\n    },\n\n    {\n      component: 'ChainedSelectField',\n      name: 'chainedSelectField',\n      label: 'ChainedSel',\n      help: 'Example help',\n      required: true,\n      blankString: 'None',\n      // multiline: true,\n      // fullWidth: true,\n      options: chainedSelectOptions,\n    },\n\n    {\n      component: 'ChainedSelectListField',\n      name: 'chainedSelectListField',\n      label: 'ChainSelList',\n      help: 'Example help',\n      required: true,\n      blankString: 'None',\n      // multiline: true,\n      // fullWidth: true,\n      options: chainedSelectOptions,\n    },\n\n    {\n      name: 'cityField',\n      component: 'CityField',\n      label: 'CityField',\n      help: 'Example help',\n      required: true,\n    },\n\n    {\n      component: 'CollectionField',\n      name: 'collectionField',\n      label: 'Records',\n      help: 'Example help',\n      required: true,\n      // maxColumns: 1,\n      formFactory: {\n        component: 'Factory',\n        product: {\n          component: 'Form',\n          fields: [\n            {\n              name: 'firstName',\n              component: 'TextField',\n              label: 'First Name',\n              required: true,\n            },\n            {\n              name: 'lastName',\n              component: 'TextField',\n              label: 'Last Name',\n            },\n          ],\n        },\n      },\n    },\n\n    {\n      name: 'countryField',\n      component: 'CountryField',\n      label: 'CountryField',\n      help: 'Example help',\n      blankString: 'None',\n      required: true,\n    },\n\n    {\n      name: 'dateField',\n      component: 'DateField',\n      label: 'DateField',\n      help: 'Example help',\n      // includeTime: true,\n      minDate: '2018-01-01T23:07:28.157Z',\n      maxDate: '2022-01-01T23:07:28.157Z',\n      required: true,\n      // format: 'yyyy-MM-dd'\n    },\n\n    {\n      component: 'EmailField',\n      name: 'emailField',\n      label: 'Email',\n      help: 'Example help',\n      required: true,\n    },\n\n    {\n      component: 'FormField',\n      name: 'formField',\n      label: 'FormField',\n      help: 'Example help',\n      required: true,\n      // elevate: true,\n      form: {\n        component: 'Form',\n        fields: [\n          {\n            name: 'github',\n            component: 'URLField',\n            block: false,\n            label: 'GitHub',\n          },\n          {\n            name: 'medium',\n            component: 'URLField',\n            label: 'Medium',\n          },\n          {\n            name: 'twitter',\n            component: 'URLField',\n            label: 'Twitter',\n          },\n        ],\n      },\n    },\n\n    {\n      name: 'idField',\n      component: 'IdField',\n      label: 'IdField',\n      help: 'Example help',\n      required: true,\n    },\n\n    {\n      name: 'integerField',\n      component: 'IntegerField',\n      label: 'IntegerField',\n      help: 'Example help',\n      required: true,\n    },\n\n    {\n      component: 'ListField',\n      name: 'listFieldEmail',\n      label: 'ListField Email',\n      singularLabel: 'Email',\n      help: 'Example help',\n      required: true,\n      fieldFactory: {\n        component: 'Factory',\n        product: {\n          component: 'EmailField',\n        },\n      },\n    },\n\n    {\n      component: 'ListField',\n      name: 'listFieldName',\n      label: 'ListField Name',\n      singularLabel: 'Name',\n      help: 'Example help',\n      required: true,\n      fieldFactory: {\n        component: 'Factory',\n        product: {\n          component: 'PersonFullNameField',\n        },\n      },\n    },\n\n    {\n      name: 'moneyField',\n      component: 'MoneyField',\n      label: 'MoneyField',\n      help: 'Example help',\n      // prefix: '',\n      // decimalSymbol: ',',\n      // thousandsSeparatorSymbol: '.',\n      required: true,\n    },\n\n    {\n      name: 'numberField',\n      component: 'NumberField',\n      label: 'NumberField',\n      help: 'Example help',\n      // includeThousandsSeparator: true,\n      required: true,\n    },\n\n    {\n      name: 'passwordField',\n      component: 'PasswordField',\n      label: 'PasswordField',\n      help: 'Example help',\n      required: true,\n    },\n\n    {\n      name: 'personFullNameField',\n      component: 'PersonFullNameField',\n      label: 'PersonFullNameField',\n      help: 'Example help',\n      required: true,\n    },\n\n    {\n      name: 'personNameField',\n      component: 'PersonNameField',\n      label: 'PersonNameField',\n      help: 'Example help',\n      required: true,\n    },\n\n    {\n      name: 'phoneField',\n      component: 'PhoneField',\n      label: 'PhoneField',\n      help: 'Example help',\n      // defaultMask: '.... ......',\n      required: true,\n    },\n\n    {\n      name: 'postalCodeField',\n      component: 'PostalCodeField',\n      label: 'PostalCodeField',\n      help: 'Example help',\n      required: true,\n    },\n\n    {\n      name: 'provinceField',\n      component: 'ProvinceField',\n      label: 'ProvinceField',\n      help: 'Example help',\n      required: true,\n    },\n\n    {\n      component: 'ReCAPTCHAField',\n    },\n\n    {\n      name: 'selectField',\n      component: 'SelectField',\n      label: 'SelectField',\n      help: 'Example help',\n      required: true,\n      blankString: 'None',\n      options: [\n        { value: 'red', label: 'Red' },\n        { value: 'green', label: 'Green' },\n        { value: 'blue', label: 'Blue' },\n      ],\n    },\n\n    {\n      name: 'selectFieldMult',\n      component: 'SelectField',\n      label: 'SelFld (mult)',\n      help: 'Example help',\n      required: true,\n      multiple: true,\n      blankString: 'None',\n      // autocomplete: false,\n      options: [\n        { value: 'red', label: 'Red' },\n        { value: 'green', label: 'Green' },\n        { value: 'blue', label: 'Blue' },\n      ],\n    },\n\n    {\n      name: 'selectListField',\n      component: 'SelectListField',\n      label: 'SelListField',\n      help: 'Example help',\n      required: true,\n      blankString: 'None', // Provide a way for the user to delete the entry\n      options: [\n        { value: 'red', label: 'Red' },\n        { value: 'green', label: 'Green' },\n        { value: 'blue', label: 'Blue' },\n      ],\n    },\n\n    {\n      name: 'stateField',\n      component: 'StateField',\n      label: 'StateField',\n      help: 'Example help',\n      blankString: 'None',\n      required: true,\n    },\n\n    {\n      name: 'text',\n      component: 'Text',\n      text:\n        '# Text\\nCan contain any [markdown](https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet)',\n    },\n\n    {\n      name: 'timeField',\n      component: 'TimeField',\n      label: 'TimeField',\n      help: 'Example help',\n      // showSeconds: true,\n      required: true,\n    },\n\n    {\n      name: 'textField',\n      component: 'TextField',\n      label: 'TextField',\n      help: 'Example help',\n      // mask: ['(', '/[1-9]/', '/\\\\d/', '/\\\\d/', ')'],\n      // mask: '(...)',\n      required: true,\n    },\n\n    {\n      name: 'textListField',\n      component: 'TextListField',\n      label: 'TextListField',\n      help: 'Example help',\n      singularLabel: 'Text Item',\n      required: true,\n    },\n\n    {\n      name: 'urlField',\n      component: 'URLField',\n      label: 'URLField',\n      help: 'Example help',\n      // newWindow: true,\n      required: true,\n    },\n  ],\n};\n\nexport default fields;\n","import App from './app';\nimport './contact-no-mson';\nimport Contacts from './contacts';\nimport ContactsLocalStorage from './contacts-local-storage';\nimport ContactsFirebase from './contacts-firebase';\nimport EditContact from './edit-contact';\nimport FieldsScreen from './fields-screen';\nimport Fields from './fields';\nimport FormBuilder from './form-builder';\nimport GenerateComponent from './generate-component';\nimport Grid from './grid';\nimport Home from './home';\nimport Tasks from './tasks';\nimport TasksLocalStorage from './tasks-local-storage';\nimport TasksFirebase from './tasks-firebase';\nimport Router from './router';\n\nconst components = {\n  App,\n  Contacts,\n  ContactsLocalStorage,\n  ContactsFirebase,\n  EditContact,\n  FieldsScreen,\n  Fields,\n  FormBuilder,\n  GenerateComponent,\n  Grid,\n  Home,\n  Tasks,\n  TasksLocalStorage,\n  TasksFirebase,\n  Router,\n};\n\nexport default components;\n","const contactsLocalStorage = {\n  name: 'app.ContactsLocalStorage',\n  component: 'app.Contacts',\n  store: {\n    component: 'LocalStorageStore',\n    storeName: 'contactsLocalStorage',\n  },\n};\n\nexport default contactsLocalStorage;\n","const contactsFirebase = {\n  name: 'app.ContactsFirebase',\n  component: 'app.Contacts',\n  store: {\n    component: 'FirebaseStore',\n    apiKey: 'AIzaSyCJfqjdBBrXtwkXla6uMX3LZGOLDAgTEx0',\n    authDomain: 'mson-contacts.firebaseapp.com',\n    projectId: 'mson-contacts',\n    collection: 'contacts',\n  },\n};\n\nexport default contactsFirebase;\n","const editContact = {\n  name: 'app.EditContact',\n  component: 'RecordEditor',\n  baseForm: {\n    component: 'Form',\n    fields: [\n      {\n        name: 'firstName',\n        component: 'TextField',\n        label: 'First Name',\n        required: true,\n        block: false,\n      },\n      {\n        name: 'lastName',\n        component: 'TextField',\n        label: 'Last Name',\n      },\n      {\n        name: 'email',\n        component: 'EmailField',\n        label: 'Email',\n      },\n    ],\n    listeners: [\n      {\n        event: 'load',\n        actions: [\n          {\n            // Default the id to '1' so that we can edit the doc later. Usually, this id would come\n            // from the route or the user's session\n            component: 'Set',\n            name: 'fields.id.value',\n            value: '1',\n          },\n        ],\n      },\n    ],\n  },\n  label: 'Contact',\n  store: {\n    component: 'LocalStorageStore',\n    storeName: 'contactLocalStorage',\n  },\n  storeWhere: {\n    id: '1',\n  },\n};\n\nexport default editContact;\n","const fieldsScreen = {\n  name: 'app.FieldsScreen',\n  component: 'app.Fields',\n  fields: [\n    {\n      name: 'import',\n      component: 'ButtonField',\n      label: 'Import',\n      icon: 'ImportContacts',\n    },\n    {\n      name: 'reset',\n      component: 'ButtonField',\n      label: 'Reset',\n      icon: 'ClearAll',\n    },\n    {\n      name: 'toggleDisplayValues',\n      component: 'ButtonField',\n      label: 'Show Display Values',\n      icon: 'ViewHeadline',\n    },\n    {\n      name: 'toggleEditable',\n      component: 'ButtonField',\n      label: 'Immutable',\n      icon: 'NotInterested',\n    },\n    {\n      name: 'toggleDisabled',\n      component: 'ButtonField',\n      label: 'Disable',\n      icon: 'Lock',\n    },\n    {\n      name: 'toggleFullWidth',\n      component: 'ButtonField',\n      label: 'Full Width',\n      icon: 'FormatAlignJustify',\n    },\n    {\n      name: 'log',\n      component: 'ButtonField',\n      label: 'Log Values',\n      icon: 'MoveToInbox',\n    },\n  ],\n  listeners: [\n    {\n      event: 'import',\n      actions: [\n        {\n          component: 'Set',\n          name: 'component',\n          value: {\n            'fields.addressField.value': {\n              addressLine1: '121 Pike Street',\n              addressLine2: 'Suite 201',\n              city: 'Seatte',\n              stateProvince: 'WA',\n              postalCode: '98107',\n              country: 'US',\n            },\n            'fields.booleanField.value': true,\n            'fields.chainedSelectField.value': [2, 5, 9, 10],\n            'fields.chainedSelectListField.value': [\n              [1, 3, 7],\n              [2, 5, 9, 10],\n            ],\n            'fields.cityField.value': 'Seattle',\n            'fields.collectionField.value': [\n              {\n                id: 'daenerys',\n                firstName: 'Daenerys',\n                lastName: 'Targaryen',\n              },\n              {\n                id: 'jon',\n                firstName: 'Jon',\n                lastName: 'Snow',\n              },\n              {\n                id: 'tyrion',\n                firstName: 'Tyrion',\n                lastName: 'Lannister',\n              },\n            ],\n            'fields.countryField.value': 'US',\n            'fields.dateField.value': '2018-09-27T17:24:24.960Z',\n            'fields.emailField.value': 'test@example.com',\n            'fields.formField.value': {\n              github: 'github.com/redgeoff',\n              medium: 'medium.com/@redgeoff',\n              twitter: 'twitter.com/redgeoff7',\n            },\n            // 'fields.github.value': 'github.com/redgeoff',\n            // 'fields.medium.value': 'medium.com/@redgeoff',\n            // 'fields.twitter.value': 'twitter.com/redgeoff7',\n            'fields.idField.value': 'id-123',\n            'fields.integerField.value': 123,\n            'fields.listFieldEmail.value': [\n              'test1@example.com',\n              'test2@example.com',\n            ],\n            'fields.listFieldName.value': [\n              { firstName: 'Ella', lastName: 'Fitzgerald' },\n              { firstName: 'Ray', lastName: 'Charles' },\n            ],\n            'fields.moneyField.value': 1000000.11,\n            'fields.numberField.value': 123.4,\n            'fields.passwordField.value': 'password123',\n            'fields.personFullNameField.value': {\n              firstName: 'Daenerys',\n              lastName: 'Targaryen',\n            },\n            'fields.personNameField.value': 'Daenerys',\n            'fields.phoneField.value': '6461234567',\n            'fields.postalCodeField.value': '98107',\n            'fields.provinceField.value': 'British Columbia',\n            'fields.selectField.value': 'red',\n            'fields.selectFieldMult.value': ['red', 'blue'],\n            'fields.selectListField.value': ['red', 'green'],\n            'fields.stateField.value': 'WA',\n            'fields.timeField.value': '2018-09-27T17:24:24.960Z',\n            'fields.textField.value': 'Go MSON',\n            'fields.textListField.value': ['MSON', 'React', 'Material-UI'],\n            'fields.urlField.value': 'mson.co',\n          },\n        },\n      ],\n    },\n    {\n      event: 'reset',\n      actions: [\n        {\n          component: 'Set',\n          name: 'reset',\n          value: true,\n        },\n      ],\n    },\n    {\n      event: 'toggleDisplayValues',\n      actions: [\n        {\n          component: 'Action',\n          if: {\n            'fields.id.useDisplayValue': {\n              $ne: true,\n            },\n          },\n          actions: [\n            {\n              component: 'Set',\n              name: 'component',\n              value: {\n                eachField: {\n                  useDisplayValue: true,\n                },\n                'fields.toggleDisplayValues': {\n                  label: 'Hide Display Values',\n                  icon: 'Input',\n                },\n              },\n            },\n          ],\n          else: [\n            {\n              component: 'Set',\n              name: 'component',\n              value: {\n                eachField: {\n                  useDisplayValue: false,\n                },\n                'fields.toggleDisplayValues': {\n                  label: 'Show Display Values',\n                  icon: 'ViewHeadline',\n                },\n              },\n            },\n          ],\n        },\n      ],\n    },\n    {\n      event: 'toggleEditable',\n      actions: [\n        {\n          component: 'Action',\n          if: {\n            'fields.id.editable': {\n              $ne: true,\n            },\n          },\n          actions: [\n            {\n              component: 'Set',\n              name: 'component',\n              value: {\n                editable: true,\n                'fields.toggleEditable': {\n                  label: 'Immutable',\n                  icon: 'NotInterested',\n                },\n              },\n            },\n          ],\n          else: [\n            {\n              component: 'Set',\n              name: 'component',\n              value: {\n                editable: false,\n                'fields.toggleEditable': {\n                  label: 'Editable',\n                  icon: 'Edit',\n                },\n              },\n            },\n          ],\n        },\n      ],\n    },\n    {\n      event: 'toggleDisabled',\n      actions: [\n        {\n          component: 'Action',\n          if: {\n            'fields.id.disabled': {\n              $ne: true,\n            },\n          },\n          actions: [\n            {\n              component: 'Set',\n              name: 'component',\n              value: {\n                disabled: true,\n                'fields.toggleDisabled': {\n                  label: 'Enable',\n                  icon: 'LockOpen',\n                },\n              },\n            },\n            {\n              // Renable so we can still click the button\n              component: 'Set',\n              name: 'fields.toggleDisabled.disabled',\n              value: false,\n            },\n          ],\n          else: [\n            {\n              component: 'Set',\n              name: 'component',\n              value: {\n                disabled: false,\n                'fields.toggleDisabled': {\n                  label: 'Disable',\n                  icon: 'Lock',\n                },\n              },\n            },\n          ],\n        },\n      ],\n    },\n    {\n      event: 'toggleFullWidth',\n      actions: [\n        {\n          component: 'Action',\n          if: {\n            'fields.id.fullWidth': {\n              $ne: true,\n            },\n          },\n          actions: [\n            {\n              component: 'Set',\n              name: 'component',\n              value: {\n                fullWidth: true,\n                'fields.toggleFullWidth': {\n                  label: 'Flex Width',\n                  icon: 'FormatAlignLeft',\n                },\n              },\n            },\n          ],\n          else: [\n            {\n              component: 'Set',\n              name: 'component',\n              value: {\n                fullWidth: false,\n                'fields.toggleFullWidth': {\n                  label: 'Full Width',\n                  icon: 'FormatAlignLeft',\n                },\n              },\n            },\n          ],\n        },\n      ],\n    },\n    {\n      event: 'log',\n      actions: [\n        {\n          component: 'ConsoleLog',\n          message: '{{value}}',\n        },\n      ],\n    },\n  ],\n};\n\nexport default fieldsScreen;\n","const formBuilder = {\n  name: 'app.FormBuilder',\n  component: 'FormBuilder',\n  'fields.form.form.fields.fields.store': {\n    component: 'LocalStorageStore',\n    storeName: 'myForm',\n  },\n};\n\nexport default formBuilder;\n","// Dynamically generate a field based on a query parameter\nconst generateComponent = {\n  name: 'app.GenerateComponent',\n  component: 'Action',\n  schema: {\n    component: 'Form',\n    fields: [\n      {\n        name: 'componentType',\n        component: 'TextField',\n        // value: 'CountryField' // TODO: allow for defaulting here\n      },\n    ],\n  },\n  actions: [\n    {\n      component: 'Action',\n      if: {\n        'globals.route.query.type': null,\n      },\n      actions: [\n        {\n          component: 'Set',\n          name: 'componentType',\n          value: 'CountryField',\n        },\n      ],\n      else: [\n        {\n          component: 'Set',\n          name: 'componentType',\n          value: '{{globals.route.query.type}}',\n        },\n      ],\n    },\n    {\n      component: 'GenerateComponent',\n      definition: JSON.stringify({\n        component: 'Form',\n        fields: [\n          {\n            name: 'type',\n            component: 'SelectField',\n            label: 'Field Type',\n            options: [\n              { value: 'TextField', label: 'TextField' },\n              { value: 'PersonFullNameField', label: 'PersonFullNameField' },\n              { value: 'CountryField', label: 'CountryField' },\n            ],\n            value: '{{componentType}}',\n            autocomplete: false,\n          },\n          {\n            name: 'generatedField',\n            component: '{{componentType}}',\n            label: 'Generated Field',\n          },\n        ],\n        listeners: [\n          {\n            event: 'fields.type.value',\n            actions: [\n              {\n                component: 'Redirect',\n                path: '/router/generate-component?type={{fields.type.value}}',\n              },\n            ],\n          },\n        ],\n      }),\n    },\n  ],\n};\n\nexport default generateComponent;\n","const grid = {\n  name: 'app.Grid',\n  component: 'Grid',\n  items: [\n    {\n      component: 'GridItem',\n      md: 6,\n      xs: 12,\n      content: {\n        component: 'Text',\n        text: '# A',\n      },\n    },\n    {\n      component: 'GridItem',\n      md: 6,\n      xs: 12,\n      content: {\n        component: 'Text',\n        text: '# B',\n      },\n    },\n    {\n      component: 'GridItem',\n      md: 6,\n      xs: 12,\n      content: {\n        component: 'Text',\n        text: '# C',\n      },\n    },\n    {\n      component: 'GridItem',\n      md: 6,\n      xs: 12,\n      content: {\n        component: 'Text',\n        text: '# D',\n      },\n    },\n    {\n      component: 'GridItem',\n      md: 6,\n      xs: 12,\n      content: {\n        name: 'toggleA',\n        component: 'ButtonField',\n        label: 'Toggle A',\n        listeners: [\n          {\n            event: 'click',\n            actions: [\n              {\n                component: 'Action',\n                if: {\n                  'parent.parent.items.0.hidden': true,\n                },\n                actions: [\n                  {\n                    component: 'Set',\n                    name: 'parent.parent.items.0.hidden',\n                    value: false,\n                  },\n                ],\n                else: [\n                  {\n                    component: 'Set',\n                    name: 'parent.parent.items.0.hidden',\n                    value: true,\n                  },\n                ],\n              },\n            ],\n          },\n        ],\n      },\n    },\n  ],\n};\n\nexport default grid;\n","const home = {\n  name: 'app.Home',\n  component: 'Text',\n  text: '# Welcome\\nCheck out the examples on the left',\n};\n\nexport default home;\n","const tasks = {\n  name: 'app.Tasks',\n  component: 'Form',\n  schema: {\n    component: 'Form',\n    fields: [\n      {\n        name: 'store',\n        component: 'Field',\n      },\n    ],\n  },\n  fields: [\n    {\n      component: 'Text',\n      name: 'header',\n      text: '(drag to reorder)',\n    },\n    {\n      component: 'CollectionField',\n      name: 'tasks',\n      label: 'Tasks',\n      hideLabel: true,\n      // forbidCreate: true,\n      // forbidUpdate: true,\n      // forbidDelete: true,\n      // forbidViewArchived: true,\n      // forbidSearch: true,\n      // forbidSort: true,\n      forbidOrder: false,\n      formFactory: {\n        component: 'Factory',\n        product: {\n          component: 'Form',\n          fields: [\n            {\n              name: 'task',\n              component: 'TextField',\n              label: 'Task',\n              multiline: true,\n              required: true,\n            },\n            {\n              name: 'due',\n              component: 'DateField',\n              label: 'Due',\n            },\n          ],\n        },\n      },\n      store: '{{store}}',\n    },\n  ],\n};\n\nexport default tasks;\n","const tasksLocalStorage = {\n  name: 'app.TasksLocalStorage',\n  component: 'app.Tasks',\n  store: {\n    component: 'LocalStorageStore',\n    storeName: 'tasksLocalStorage',\n  },\n};\n\nexport default tasksLocalStorage;\n","const tasksFirebase = {\n  name: 'app.TasksFirebase',\n  component: 'app.Tasks',\n  store: {\n    component: 'FirebaseStore',\n    apiKey: 'AIzaSyCJfqjdBBrXtwkXla6uMX3LZGOLDAgTEx0',\n    authDomain: 'mson-contacts.firebaseapp.com',\n    projectId: 'mson-contacts',\n    collection: 'tasks',\n  },\n};\n\nexport default tasksFirebase;\n","const router = {\n  name: 'app.Router',\n  component: 'Form',\n  fields: [\n    {\n      component: 'TextField',\n      name: 'personId',\n      label: 'personId',\n      block: false,\n    },\n    {\n      component: 'TextField',\n      name: 'messageId',\n      label: 'messageId',\n    },\n    {\n      component: 'TextField',\n      name: 'first',\n      label: 'first',\n      block: false,\n    },\n    {\n      component: 'TextField',\n      name: 'last',\n      label: 'last',\n    },\n    {\n      component: 'TextField',\n      name: 'hash',\n      label: 'hash',\n    },\n    {\n      component: 'ButtonField',\n      name: 'submit',\n      label: 'Go',\n      type: 'submit',\n      icon: 'Send',\n    },\n  ],\n  listeners: [\n    {\n      event: 'load',\n      actions: [\n        {\n          component: 'Set',\n          name: 'value',\n          value: {\n            personId: '{{globals.route.parameters.personId}}',\n            messageId: '{{globals.route.parameters.messageId}}',\n            first: '{{globals.route.query.first}}',\n            last: '{{globals.route.query.last}}',\n            hash: '{{globals.route.hash}}',\n          },\n        },\n      ],\n    },\n    {\n      event: 'submit',\n      actions: [\n        {\n          component: 'Set',\n          name: 'pristine',\n          value: true,\n        },\n        {\n          component: 'Redirect',\n          path:\n            '/router/person/{{fields.personId.value}}/message/{{fields.messageId.value}}?first={{fields.first.value}}&last={{fields.last.value}}#{{fields.hash.value}}',\n        },\n      ],\n    },\n  ],\n};\n\nexport default router;\n","import React from 'react';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\nimport Form from './form';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport Field from './fields/field';\nimport compiler from 'mson/lib/compiler';\nimport each from 'lodash/each';\nimport attach from './attach';\nimport ComponentField from 'mson/lib/fields/component-field';\n\nconst styles = (theme) => ({\n  form: {\n    overflowY: 'scroll',\n    maxHeight: 'calc(100vh - 390px)',\n    marginTop: theme.spacing(3),\n  },\n});\n\nclass FieldEditorForm extends React.PureComponent {\n  state = {\n    field: null,\n  };\n\n  handleValueChange = (value) => {\n    const form = this.props.component;\n    let { field } = this.state;\n    let component = null;\n\n    // Is the field changing?\n    if (!field || value.componentName !== field.getClassName()) {\n      if (field) {\n        // Prevent listener leak\n        field.destroy();\n      }\n\n      if (value.componentName) {\n        component = compiler.newComponent({\n          component: value.componentName,\n        });\n\n        // Is the component a field?\n        if (component.isField) {\n          field = component;\n        } else {\n          // e.g. Text component is not a field\n          field = new ComponentField({ content: component });\n        }\n\n        // Auto validate so that the user can preview how the validation will work\n        const validate = () => {\n          field.clearErr();\n          field.validate();\n        };\n        field.on('value', validate);\n        field.on('touched', validate);\n      } else {\n        field = null;\n      }\n    }\n\n    if (field) {\n      // Set field values using form values. The corresponding values may not exist if the field was\n      // just changed.\n      const values = form.getValues({ default: false });\n      component =\n        field.getClassName() === 'ComponentField'\n          ? field.get('content')\n          : field;\n      each(values, (value, name) => {\n        if (component.has(name)) {\n          component.set({ [name]: value });\n        }\n      });\n    }\n\n    this.setState({ field });\n  };\n\n  componentDidMount() {\n    // Note: we use a listener on value instead of attaching to value as a shallow compare of value\n    // would not trigger a state change.\n    this.props.component.on('value', this.handleValueChange);\n\n    // Initialize with the current value\n    this.handleValueChange(this.props.component.getValues());\n  }\n\n  componentWillUnmount() {\n    this.props.component.removeListener('value', this.handleValueChange);\n  }\n\n  render() {\n    const { component, classes, formTag, mode } = this.props;\n    const { field } = this.state;\n\n    let preview = null;\n    if (field && mode !== 'read') {\n      preview = (\n        <Card className={classes.card}>\n          <CardContent>\n            <Typography color=\"textSecondary\" gutterBottom>\n              Preview\n            </Typography>\n            <Field component={field} />\n          </CardContent>\n        </Card>\n      );\n    }\n\n    if (mode !== 'read') {\n      return (\n        <React.Fragment>\n          <div className={classes.preview}>{preview}</div>\n          <div className={classes.form}>\n            <Form component={component} formTag={formTag} mode={mode} />\n          </div>\n        </React.Fragment>\n      );\n    } else if (field) {\n      // Disable so that the user can edit the field with a click\n      return <Field component={field} disabled={true} />;\n    } else {\n      return null;\n    }\n  }\n}\n\nFieldEditorForm = withStyles(styles)(FieldEditorForm);\nFieldEditorForm = attach(['mode'])(FieldEditorForm);\n\nexport default FieldEditorForm;\n","import React from 'react';\nimport Form from './form';\nimport Component from './component';\nimport attach from './attach';\n\nclass FormEditor extends React.Component {\n  render() {\n    const { editable, component } = this.props;\n    if (editable !== false) {\n      return <Form {...this.props} />;\n    } else {\n      // Note: we need to use a getter to generate the definition\n      const definition = component.get('definition');\n\n      // Needed as form tag cannot be a descendant of a form tag\n      const formTag = false;\n\n      return <Component definition={definition} formTag={formTag} />;\n    }\n  }\n}\n\nFormEditor = attach(['editable'])(FormEditor);\n\nexport default FormEditor;\n","import compiler from 'mson/lib/compiler';\nimport components from './components';\nimport globals from 'mson/lib/globals';\nimport uiComponents from '../components';\nimport FieldEditorForm from 'mson/lib/form/field-editor-form';\nimport FieldEditorFormUI from '../field-editor-form';\nimport FormEditor from 'mson/lib/form/form-editor';\nimport FormEditorUI from '../form-editor';\nimport FormBuilder from 'mson/lib/form/form-builder';\n\n// Set the site key when using the ReCAPTCHAField\nglobals.set({ reCAPTCHASiteKey: '6LdIbGMUAAAAAJnipR9t-SnWzCbn0ZX2myXBIauh' });\n\n// Register optional core components\ncompiler.registerComponent('FieldEditorForm', FieldEditorForm);\nuiComponents.FieldEditorForm = FieldEditorFormUI;\ncompiler.registerComponent('FormEditor', FormEditor);\nuiComponents.FormEditor = FormEditorUI;\ncompiler.registerComponent('FormBuilder', FormBuilder);\n\n// Register all the components\nfor (let name in components) {\n  let component = components[name];\n  compiler.registerComponent(component.name, component);\n}\n\n// Instantiate the app\nconst app = compiler.newComponent({\n  component: 'app.App',\n});\n\nexport default app;\n","import { render } from '../bundle';\nimport 'typeface-roboto';\nimport app from './app';\n\n// Render the app\nrender(app);\n"],"sourceRoot":""}